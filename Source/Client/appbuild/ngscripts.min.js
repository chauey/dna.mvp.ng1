!function(){"use strict";var e=angular.module("app",["ngAnimate","ngRoute","ngSanitize","ngMessages","common","common.bootstrap","breeze.angular","breeze.directives","ngzWip","ui.bootstrap","LocalStorageModule","highcharts-ng","wj","kendo.directives","xeditable","angularFileUpload"]);e.config(["$httpProvider",function(e){e.interceptors.push("authInterceptorService")}]),e.run(["$route","authService","routeMediator","editableOptions",function(e,t,n,a){n.setRoutingHandlers(),t.fillAuthData(),a.theme="bs3"}])}(),function(){"use strict";var e=angular.module("app");toastr.options.timeOut=4e3,toastr.options.positionClass="toast-bottom-right";var t={backspace:8,tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46},n="breeze/Breeze",a={controllerActivateSuccess:"controller.activateSuccess",spinnerToggle:"spinner.toggle",sideBarToggle:"sideBar.toggle",hasChangesChanged:"datacontext.hasChangesChanged",entitiesChanged:"datacontext.entitiesChanged",userActionAdded:"user.actionAdded",storage:{error:"store.error",storeChanged:"store.changed",wipChanged:"wip.changed"}},r={appErrorPrefix:"[DNA Error] ",docTitle:"DNA: ",events:a,keyCodes:t,remoteServiceName:n,version:"2.1.0",authClientId:"ngAuthApp"};e.value("config",r),e.config(["$logProvider",function(e){e.debugEnabled&&e.debugEnabled(!0)}]),e.config(["commonConfigProvider",function(e){e.config.controllerActivateSuccessEvent=r.events.controllerActivateSuccess,e.config.spinnerToggleEvent=r.events.spinnerToggle,e.config.sideBarToggleEvent=r.events.sideBarToggle,e.config.userActionAddedEvent=r.events.userActionAdded}]),e.config(["zStorageConfigProvider",function(e){e.config={enabled:!1,key:"DnaSpa-Web/Hybrid-MobileDemoNgZ",events:a.storage,appErrorPrefix:r.appErrorPrefix,version:r.version,wipKey:"DnaSpa-Web/Hybrid-MobileDemoNgZ.WIP",newGuid:breeze.core.getUuid}}]),e.config(["zDirectivesConfigProvider",function(e){e.zValidateTemplate='<span class="invalid"><i class="fa fa-warning fa-fw"></i>Error: %error%</span>'}])}(),function(){"use strict";function e(e,t,n){var a=t.appErrorPrefix,r=n.getLogFn("app","error");return function(t,n){if(e(t,n),!a||0!==t.message.indexOf(a)){var o={exception:t,cause:n},i=a+t.message;r(i,o,!0);var c=new XMLHttpRequest;c.open("POST","/api/error",!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.send(o.exception.stack)}}}var t=angular.module("app");t.config(["$provide",function(t){t.decorator("$exceptionHandler",["$delegate","config","logger",e])}])}(),function(){"use strict";function e(e,n){function a(n,a){return a.resolve=angular.extend(a.resolve||{},{prime:t}),e.when(n,a),e}n.forEach(function(e){a(e.url,e.config)}),e.otherwise({redirectTo:"/"})}function t(e){return e.prime()}function n(){return[{url:"/login",config:{title:"Login",templateUrl:"appbuild/views/membership/login.html",settings:{}}},{url:"/register",config:{title:"Register",templateUrl:"appbuild/views/membership/register.html",settings:{}}},{url:"/manage",config:{title:"Manage Account",templateUrl:"appbuild/views/membership/manage.html",settings:{}}},{url:"/authComplete",config:{title:"Authentication Complete",templateUrl:"appbuild/views/membership/authComplete.html",settings:{}}},{url:"/associate",config:{title:"Account Association",templateUrl:"appbuild/views/membership/associate.html",settings:{}}},{url:"/",config:{templateUrl:"appbuild/views/dashboard/dashboard.html",title:"Dashboard",settings:{nav:1,content:'<i class="fa fa-home fa-fw"></i> Dashboard'}}},{url:"/styling",config:{title:"Styling",templateUrl:"appbuild/views/styling/styling.html",settings:{nav:2,content:'<i class="fa fa-paint-brush fa-fw"></i> Styling Samples'}}},{url:"/admin",config:{title:"Admin",templateUrl:"appbuild/views/admin/admin.html",settings:{nav:3,content:'<i class="fa fa-lock fa-fw"></i> Admin Panel'}}},{url:"/ui",config:{title:"UI Elements",templateUrl:"appbuild/views/ui/ui.html",settings:{nav:4,content:'<i class="fa fa-picture-o fa-fw"></i> UI Elements'}}},{url:"/typeOfTypeList",config:{title:"Type Of Types",templateUrl:"appbuild/views/typeOfType/typeOfTypeList.html",settings:{nav:5,content:'<i class="fa fa-file-text-o fa-fw"></i> Type of Types'}}},{url:"/typeOfType/:id",config:{title:"Type Of Type Detail",templateUrl:"appbuild/views/typeOfType/typeOfTypeItem.html",settings:{}}},{url:"/validationList",config:{title:"Validations",templateUrl:"appbuild/views/validation/validationList.html",settings:{nav:6,content:'<i class="fa fa-check fa-fw"></i> Validations'}}},{url:"/validation/:id",config:{title:"Validation Detail",templateUrl:"appbuild/views/validation/validationItem.html",settings:{}}},{url:"/allDataTypeList",config:{title:"All Data Types",templateUrl:"appbuild/views/allDataType/allDataTypeList.html",settings:{nav:7,content:'<i class="fa fa-file-text-o fa-fw"></i> All Data Types'}}},{url:"/allDataType/:id",config:{title:"All Data Type Detail",templateUrl:"appbuild/views/allDataType/allDataTypeItem.html",settings:{}}},{url:"/upload",config:{title:"File Upload",templateUrl:"appbuild/views/fileUpload/fileUpload.html",settings:{nav:8,content:'<i class="fa fa-cloud-upload"></i> File Upload'}}},{url:"/workinprogress",config:{title:"Work In Progress",templateUrl:"appbuild/views/wip/wip.html",settings:{content:'<i class="fa fa-asterisk fa-fw"></i> Work In Progress'}}}]}var a=angular.module("app");a.constant("routes",n()),a.config(["$routeProvider","routes",e]),t.$inject=["datacontext"]}(),function(){"use strict";function e(e,n,a,r,o,i,c){function s(){return h.authentication.isAuth?void i.activateController([],t).then(function(){f("Activated Admin View.")}):(f("Please login to access admin view."),n.path("/login"))}function l(e){switch(e.toLowerCase()){case"error":0==h.errorLogs.length&&u(),h.errorShow=!h.errorShow;break;case"account":0==h.accounts.length&&d(),h.accountShow=!h.accountShow;break;case"role":f("UNDONE");break;case"audit":0==h.auditLogs.length&&p(),h.auditShow=!h.auditShow;break;case"token":f("UNDONE")}}function u(){return c.admin.getAll("elmah").then(function(e){return h.errorLogs=e,h.fgError=new wijmo.collections.CollectionView(h.errorLogs),h.fgError.pageSize=20,a.$watch("vm.errorGroup",function(){var e=h.fgError;if(e.groupDescriptions.clear(),h.errorGroup)for(var t=h.errorGroup.split(","),n=0;n<t.length;n++){var a=t[n];if("timeUtc"==a){var r=new wijmo.collections.PropertyGroupDescription(a,function(e){return e.timeUtc});e.groupDescriptions.push(r)}else{var r=new wijmo.collections.PropertyGroupDescription(a);e.groupDescriptions.push(r)}}}),e})}function d(){return c.admin.getAll("account").then(function(e){return h.accounts=e,h.fgAccount=new wijmo.collections.CollectionView(h.accounts),h.fgAccount.pageSize=20,a.$watch("vm.accountGroup",function(){var e=h.fgAccount;if(e.groupDescriptions.clear(),h.accountGroup)for(var t=h.accountGroup.split(","),n=0;n<t.length;n++){var a=t[n],r=new wijmo.collections.PropertyGroupDescription(a);e.groupDescriptions.push(r)}}),e})}function p(){return c.admin.getAll("audit").then(function(e){return h.auditLogs=e,h.auditLogs.forEach(function(e){switch(e.what.toLowerCase()){case"u":e.what="Update";break;case"i":e.what="Insert";break;case"d":e.what="Delete"}}),h.fgAudit=new wijmo.collections.CollectionView(h.auditLogs),h.fgAudit.pageSize=20,a.$watch("vm.auditGroup",function(){var e=h.fgAudit;if(e.groupDescriptions.clear(),h.auditGroup)for(var t=h.auditGroup.split(","),n=0;n<t.length;n++){var a=t[n];if("when"==a){var r=new wijmo.collections.PropertyGroupDescription(a,function(e){return e.when.getFullYear()});e.groupDescriptions.push(r)}else{var r=new wijmo.collections.PropertyGroupDescription(a);e.groupDescriptions.push(r)}}}),e})}var g=i.logger.getLogFn,f=g(t),h=(g(t,"error"),this);h.title="Admin",h.authentication=r.authentication,h.widgetClick=l,h.errorLogs=[],h.fgError,h.errorGroup="",h.errorShow=!1,h.accounts=[],h.fgAccount,h.accountGroup="",h.accountShow=!1,h.auditLogs=[],h.fgAudit,h.auditGroup="",h.auditShow=!1,h.saveAccount=function(){return c.save()},h.removeAccount=function(e){function t(){h.accounts.splice(e,1),h.saveAccount()}return o.deleteDialog("Account").then(t)},h.addAccount=function(){a.inserted={userName:"",email:"",phoneNumber:""},h.accounts.push(a.inserted)},s()}var t="admin";angular.module("app").controller(t,["$filter","$location","$scope","authService","bootstrap.dialog","common","datacontext",e])}(),function(){"use strict";function e(e,n,a,r,o,i,c,s,l,u,d){function p(){return I.hasChanges&&!I.isSaving}function g(){v(),D(),C(),i.activateController([f()],t).then(k())}function f(){var e=n.id;return"new"===e?(I.actionType="I",I.allDataType=u.allDataType.create()):u.allDataType.getEntityByIdOrFromWip(e).then(function(e){I.actionType="U",I.originalAllDataType=x(e),I.allDataType=e.entity||e},function(){$("Unable to get AllDataType "+e),y()})}function h(){r.history.back()}function m(){u.cancel(),A(),d.replaceLocationUrlGuidWithId(I.allDataType.allDataTypeID),I.allDataType.entityAspect.entityState.isDetached()&&y()}function y(){e.path("/allDataTypes")}function v(){a.$on("$destroy",function(){b(!0),u.cancel()})}function T(){return I.isSaving=!0,u.save().then(function(){I.isSaving=!1,i.$broadcast(s.config.userActionAddedEvent,I.actionType,l.controllerNames.allDataType,"D"!=I.actionType?I.originalAllDataType:x(I.allDataType),"D"!=I.actionType?x(I.allDataType):null),A(),d.replaceLocationUrlGuidWithId(I.allDataType.allDataTypeID)},function(){I.isSaving=!1})}function D(){a.$on(c.events.hasChangesChanged,function(e,t){I.hasChanges=t.hasChanges})}function w(){function e(){function e(){A(),y()}function t(){m()}I.actionType="D",u.markDeleted(I.allDataType),I.save().then(e).catch(t)}return o.deleteDialog("AllDataType").then(e)}function C(){u.lookup.lookupCachedData}function S(){if(I.allDataType){var e=I.allDataType.propertyName||"[New AllDataType] id: "+I.allDataType.allDataTypeID;P=u.zStorageWip.storeWipEntity(I.allDataType,P,O,e)}}function b(e){i.debouncedThrottle(t,S,1e3,e)}function k(){a.$on(c.events.entitiesChanged,function(){b()})}function A(){u.zStorageWip.removeWipEntity(P)}function x(e){return{AllDataTypeID:e.allDataTypeID,BigInt:e.bigInt,Binary:e.binary,Bit:e.bit,Char:e.char,Date:e.date,DateTime:e.dateTime,DateTime2:e.dateTime2,DateTimeOffset:e.dateTimeOffset,Decimal:e.decimal,Float:e.float,Geography:e.geography,Geometry:e.geometry,Image:e.image,Int:e.int,Money:e.money,NChar:e.nChar,NText:e.nText,Numeric:e.numeric,NVarChar:e.nVarChar,NVarCharMax:e.nVarCharMax,Real:e.real,SmallDateTime:e.smallDateTime,SmallInt:e.smallInt,SmallMoney:e.smallMoney,Text:e.text,Time:e.time,TimeStamp:e.timeStamp,TinyInt:e.tinyInt,UniqueIdentifier:e.uniqueIdentifier,VarBinary:e.varBinary,VarBinaryMax:e.varBinaryMax,VarChar:e.varChar,VarCharMax:e.varCharMax,Xml:e.xml,ZHierarchyID:e.zHierarchyID,ZSql_Variant:e.zSql_Variant}}var I=this,$=i.logger.getLogFn(t,"error"),O=l.entityNames.allDataType,P=void 0;I.activate=g,I.allDataType=void 0,I.actionType="",I.originalAllDataType=null,I.goBack=h,I.cancel=m,I.save=T,I.deleteAllDataType=w,I.hasChanges=!1,I.isSaving=!1,Object.defineProperty(I,"canSave",{get:p}),I.dateFormats=["dd-MMMM-yyyy","dd-MM-yyyy","MM-dd-yyyy","MMMM-dd-yyyy","yyyy-MM-dd","shortDate","mediumDate","longDate","fullDate"],I.datePicker={minDate:"1900-01-01",maxDate:"2100-12-31",format:I.dateFormats[2],dateOptions:{formatYear:"yyyy",startingDay:1}},a.clear=function(){I.validation.date=null},a.disabled=function(){},a.toggleMin=function(){a.minDate=a.minDate?null:new Date}(),a.open=function(e){e.preventDefault(),e.stopPropagation(),a.opened=!0},g()}var t="allDataTypeDetail";angular.module("app").controller(t,["$location","$routeParams","$scope","$window","bootstrap.dialog","common","config","commonConfig","model","datacontext","helper",e])}(),function(){"use strict";function e(e,n,a,r){function o(){n.activateController([i()],t).then(function(){h("Activated AllDataTypes View.")})}function i(e){return r.allDataType.getAll(e,y.sorting.orderBy,y.sorting.orderDesc,y.paging.currentPage,y.paging.pageSize,y.allDataTypeSearch).then(function(t){return y.allDataTypes=t,(!y.allDataTypeCount||e)&&c(),s(),t})}function c(){return r.allDataType.getCount().then(function(e){return y.allDataTypeCount=e})}function s(){y.allDataTypeFilteredCount=r.allDataType.getFilteredCount(y.allDataTypeSearch)}function l(e){e&&(y.paging.currentPage=e,i())}function u(){i(!0)}function d(e){e.keyCode===m.esc&&(y.allDataTypeSearch=""),i()}function p(e){e=e.replace(/ /g,""),y.sorting.orderBy=e.charAt(0).toLowerCase()+e.slice(1),y.sorting.orderDesc=""==y.sorting.orderDesc?"desc":"";var t,n=!0;r.allDataType.getCount(n).then(function(e){t=e,y.allDataTypeCount<=t?i().then(function(e){return y.allDataTypes=e}):i(n).then(function(e){return y.allDataTypes=e})})}function g(t){t&&t.allDataTypeID&&e.path("/allDataType/"+t.allDataTypeID)}var f=n.logger.getLogFn,h=f(t),m=a.keyCodes,y=this;y.allDataTypes=[],y.allDataTypeCount=0,y.allDataTypeFilteredCount=0,y.allDataTypeSearch="",y.title="AllDataTypes",y.refresh=u,y.search=d,y.goToAllDataType=g,y.paging={currentPage:1,maxPagesToShow:5,pageSize:15},y.pageChanged=l,Object.defineProperty(y.paging,"pageCount",{get:function(){return Math.floor(y.allDataTypeFilteredCount/y.paging.pageSize)+1}}),y.setSort=p,y.theads=["BigInt","Binary","Bit","Char","Date","DateTime","DateTime2","DateTimeOffset","Decimal","Float","Geography","Geometry","Image","Int","Money","NChar","NText","Numeric","NVarChar","NVarCharMax","Real","SmallDateTime","SmallInt","SmallMoney","Text","Time","TimeStamp","TinyInt","UniqueIdentifier","VarBinary","VarBinaryMax","VarChar","VarCharMax","Xml","ZSql_Variant"],y.sorting={orderBy:"bigInt",orderDesc:""},o()}var t="allDataTypes";angular.module("app").controller(t,["$location","common","config","datacontext",e])}(),function(){"use strict";function e(e,t,n,a,r){function o(t,n){return e.all(t).then(function(){var e={controllerId:n};i(a.config.controllerActivateSuccessEvent,e)})}function i(){return t.$broadcast.apply(t,arguments)}function c(e,t,a,r,o){o=+o||300,a||(a="filtered"+t[0].toUpperCase()+t.substr(1).toLowerCase(),r=t+"Filter");var i=function(){e[a]=e[t].filter(function(t){return e[r](t)})};return function(){var e;return function(t){e&&(n.cancel(e),e=null),t||!o?i():e=n(i,o)}}()}function s(e,t,a,r){var o=1e3;a=a||o,h[e]&&(n.cancel(h[e]),h[e]=void 0),r?t():h[e]=n(t,a)}function l(e){return/^[-]?\d+$/.test(e)}function u(e,t){return e&&-1!==e.toString().toLowerCase().indexOf(t.toString().toLowerCase())}function d(e,t){t||(t="mm/dd/yyyy");var n;switch(t){default:case"mm/dd/yyyy":n=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear();break;case"dd/mm/yyyy":n=e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}return n}function p(e,t){for(var n,a=0;a<e.toString().length;a++)n=e.toString().charAt(a),-1!=t.indexOf(n)&&(e=e.replace(n,""));return e}function g(e){return e.charAt(0).toLowerCase()+e.slice(1)}function f(e){var t=0;if(!e)return"";for(var n=new Object,a=0;a<e.length;a++)n[e[a]]=(n[e[a]]||0)+1,t+=5/n[e[a]];var r={digits:/\d/.test(e),lower:/[a-z]/.test(e),upper:/[A-Z]/.test(e),nonWords:/\W/.test(e)},o=0;for(var i in r)o+=1==r[i]?1:0;return t+=10*(o-1),t=parseInt(t),t>80?"strong":t>60?"good":t>=30?"weak":""}var h={},m={$broadcast:i,$q:e,$timeout:n,activateController:o,createSearchThrottle:c,debouncedThrottle:s,isNumber:l,logger:r,textContains:u,emptyGuid:"00000000-0000-0000-0000-000000000000",formatDate:d,replaceSpecialCharacters:p,lowerCaseFirstLetter:g,strongPasswordChecker:f};return m}var t=angular.module("common",[]);t.provider("commonConfig",function(){this.config={},this.$get=function(){return{config:this.config}}}),t.factory("common",["$q","$rootScope","$timeout","commonConfig","logger",e])}(),function(){"use strict";function e(e){function t(e,t){switch(t=t||"log",t.toLowerCase()){case"success":t="logSuccess";break;case"error":t="logError";break;case"warn":t="logWarning";break;case"warning":t="logWarning"}var n=c[t]||c.log;return function(t,a,r){n(t,a,e,void 0===r?!0:r)}}function n(e,t,n,a){i(e,t,n,a,"info")}function a(e,t,n,a){i(e,t,n,a,"warning")}function r(e,t,n,a){i(e,t,n,a,"success")}function o(e,t,n,a){i(e,t,n,a,"error")}function i(t,n,a,r,o){var i="error"===o?e.error:e.log;a=a?"["+a+"] ":"",i(a,t,n),r&&("error"===o?toastr.error(t):"warning"===o?toastr.warning(t):"success"===o?toastr.success(t):toastr.info(t))}var c={getLogFn:t,log:n,logError:o,logSuccess:r,logWarning:a};return c}angular.module("common").factory("logger",["$log",e])}(),function(){"use strict";function e(e,t){function n(){r(!1)}function a(){r(!0)}function r(n){e.$broadcast(t.config.spinnerToggleEvent,{show:n})}var o={spinnerHide:n,spinnerShow:a};return o}angular.module("common").factory("spinner",["common","commonConfig",e])}(),function(){"use strict";function e(e,n,a,r,o){function i(){var e=[c()];r.activateController(e,t).then(function(){l("Activated Dashboard View.")})}function c(){return o.typeOfType.getCount().then(function(e){return u.typeOfTypeCount=e})}var s=r.logger.getLogFn,l=s(t),u=(s(t,"error"),this);u.typeOfTypeCount=0,i()}var t="dashboard";angular.module("app").controller(t,["$scope","$http","$timeout","common","datacontext",e])}(),function(){"use strict";function e(e,n,a,r,o,i){function c(){n.activateController([s(!0)],t).then(function(){m("Activated File Uploading View.")})}function s(e){return i.attachment.getAll(e,v.sorting.orderBy,v.sorting.orderDesc,v.paging.currentPage,v.paging.pageSize,v.attachmentSearch).then(function(t){v.attachments=t,(!v.attachmentCount||e)&&l(),u()})}function l(){return i.attachment.getCount().then(function(e){return v.attachmentCount=e})}function u(){v.attachmentFilteredCount=i.attachment.getFilteredCount(v.attachmentSearch)}function d(){s()}function p(){s(!0)}function g(e){e.keyCode===y.esc&&(v.attachmentSearch=""),s()}function f(e){e=e.replace(/ /g,""),v.sorting.orderBy=e.charAt(0).toLowerCase()+e.slice(1),v.sorting.orderDesc=""==v.sorting.orderDesc?"desc":"";var t,n=!0;i.attachment.getCount(n).then(function(e){t=e,v.attachmentCount<=t?s().then(function(e){return v.attachments=e}):s(n).then(function(e){return v.attachments=e})})}var h=n.logger.getLogFn,m=h(t),y=o.keyCodes,v=this;v.rootFilePath="/UploadFiles",e._Index=0,e.isActive=function(t){return e._Index===t},e.showPrev=function(){e._Index=e._Index>0?--e._Index:v.attachments.length-1},e.showNext=function(){e._Index=e._Index<v.attachments.length-1?++e._Index:0},e.showPhoto=function(t){e._Index=t},v.showGallary=function(t){for(var n=0;n<v.attachments.length;n++)if(v.attachments[n].filePath==t.filePath)return e._Index=n},v.uploader=new a({url:"/api/File/"}),v.uploader.filters.push({name:"customFilter",fn:function(){return this.queue.length<10}}),v.attachments=[],v.attachmentCount=0,v.attachmentFilteredCount=0,v.attachmentSearch="",v.title="Attachments",v.refresh=p,v.search=g,v.paging={currentPage:1,maxPagesToShow:5,pageSize:7},v.pageChanged=d,Object.defineProperty(v.paging,"pageCount",{get:function(){return Math.floor(v.attachmentFilteredCount/v.paging.pageSize)+1}}),v.setSort=f,v.theads=["File Name"],v.sorting={orderBy:"fileName",orderDesc:""},v.uploader.onCompleteItem=function(){p()},c()}var t="fileUploadController";angular.module("app").controller(t,["$scope","common","FileUploader","$location","config","datacontext",e])}(),function(){"use strict";function e(e,n){function a(){n.activateController(t).then(function(){s("Activated Account Association View.")})}function r(){function t(){s("Account has been registered successfully, redicted to Dashboard in 2 seconds."),e.startTimer("")}function n(e){c("Registration failed: "+e.message)}e.registerExternal(o.registerData).then(t).catch(n)}var o=this,i=n.logger.getLogFn,c=i(t,"error"),s=i(t);o.registerExternal=r,o.registerData={userName:e.externalAuthData.userName,provider:e.externalAuthData.provider,externalAccessToken:e.externalAuthData.externalAccessToken},o.activate=a,a()}var t="associateController";angular.module("app").controller(t,["authService","common",e])}(),window.common=function(){function e(e){var t,n,a,r,o,i,c,s={};if(null===e)return s;t=e.split("&");for(var l=0;l<t.length;l++)n=t[l],a=n.indexOf("="),-1===a?(r=n,o=null):(r=n.substr(0,a),o=n.substr(a+1)),i=decodeURIComponent(r),c=decodeURIComponent(o),s[i]=c;return s}var t={};return t.getFragment=function(){return 0===window.location.hash.indexOf("#")?e(window.location.hash.substr(1)):{}},t}();var fragment=common.getFragment();void 0!=fragment.state&&(window.location.hash=fragment.state||""),null!=window.opener&&(window.opener.$windowScope.authCompletedCB(fragment),window.close()),function(){"use strict";function e(e,n,a,r,o,i,c,s,l){function u(){i.activateController(t).then(function(){m("Activated Login View.")})}function d(){function e(){m("Login successful, redirect to Dashboard."),o.startTimer("",!0)}function t(e){h("Login failed: "+e.error_description)}o.login(g.loginData).then(e).catch(t)}function p(e){var t=l.serviceRoot,n=t+"app/membership/authComplete.html",r=t+"api/Account/ExternalLogin?provider="+e+"&response_type=token&client_id="+s.authClientId+"&redirect_uri="+n;window.$windowScope=a,window.open(r,"Authenticate Account","location=0,status=0,width=600,height=750")}var g=this,f=i.logger.getLogFn,h=f(t,"error"),m=f(t);g.activate=u,g.login=void 0,g.actionType="",g.originalLogin=null,g.loginData={userName:"",password:"",useRefreshTokens:!1},g.login=d,g.authExternalProvider=p,g.externalProviders=["Facebook","Google"],u(),a.authCompletedCB=function(t){a.$apply(function(){if("False"==t.haslocalaccount)o.logout(),o.externalAuthData={provider:t.provider,userName:t.external_user_name,externalAccessToken:t.external_access_token},e.path("/associate");else{var n={provider:t.provider,externalAccessToken:t.external_access_token};o.obtainAccessToken(n).then(function(){e.path("/")},function(e){a.message=e.error_description})}})}}var t="loginController";angular.module("app").controller(t,["$location","$routeParams","$scope","$window","authService","common","commonConfig","config","entityManagerFactory",e])}(),function(){"use strict";function e(e,n,a,r,o,i,c,s,l,u){function d(){return w.authentication.isAuth?void s.activateController([p()],t).then(function(){k("Activated Manage Account View.")}):n.path("/login")}function p(){function e(e){var t=e.data;if(null==t||"null"==t)return i.logout(),n.path("/login");for(var a=0;a<t.logins.length;a++)"Local"==t.logins[a].loginProvider&&(w.hasLocalPassword=!0,w.passwordSection="Change Password"),w.externalProviders.forEach(function(e){if(e.indexOf(t.logins[a].loginProvider)>-1){var n=w.externalProviders.indexOf(e);w.externalProviders.splice(n,1)}});for(var r=0;r<t.logins.length;r++)w.logins.push(t.logins[r]);w.account=t.account}function t(e){S("Retrieved user information failed: "+e.message+".")}o.getUserInfo().then(e).catch(t)}function g(){o.updateUserInfo(w.account).then(v).catch(D)}function f(){var e=s.strongPasswordChecker(w.password.newPassword);return"weak"==e||""==e?k("Weak password, try to use a long mixed password with: <br/>- lower-case characters<br/>- upper-case characters<br/>- digits<br/>- unique characters."):void(w.hasLocalPassword?o.changePassword(w.password).then(v).catch(D):o.setPassword(w.password).then(v).then(T).catch(D))}function h(e){var t=u.serviceRoot,n=t+"app/membership/authComplete.html",a=t+"api/Account/ExternalLogin?provider="+e+"&response_type=token&client_id="+l.authClientId+"&redirect_uri="+n;window.$windowScope=r,window.open(a,"Authenticate Account","location=0,status=0,width=600,height=750")}function m(e){function t(){if(1==w.logins.length)return b("You must have have at least 1 login.");var t={loginProvider:e.loginProvider,providerKey:e.providerKey};o.removeLogin(t).then(v).then(T).catch(D)}return c.confirmationDialog("Remove Login","Do you want to remove Login?","Yes","No").then(t)}function y(){i.refreshToken().then(function(e){w.tokenRefreshed=!0,w.tokenResponse=e},function(){n.path("/login")})}function v(){k("Update success.")}function T(){w.logins=[],p(),a.reload()}function D(e){S("Update failed: "+e.statusText+".")}var w=this,C=s.logger.getLogFn,S=C(t,"error"),b=C(t,"warning"),k=C(t);w.authentication=i.authentication,w.tokenRefreshed=!1,w.tokenResponse=null,w.refreshToken=y,w.account={userName:"",id:"",email:"",phoneNumber:""},w.upateUserInfo=g,w.hasLocalPassword=!1,w.passwordSection="Create Local Account",w.password={oldPassword:"",newPassword:"",confirmPassword:""},w.changePassword=f,w.logins=[],w.externalProviders=["Facebook","Google"],w.addLogin=h,w.removeLogin=m,w.activate=d,d(),r.authCompletedCB=function(e){r.$apply(function(){if("False"==e.haslocalaccount)i.logout(),i.externalAuthData={provider:e.provider,userName:e.external_user_name,externalAccessToken:e.external_access_token},n.path("/associate");else{var t={provider:e.provider,externalAccessToken:e.external_access_token};i.obtainAccessToken(t).then(function(){n.path("/")},function(e){r.message=e.error_description})}})}}var t="manageController";angular.module("app").controller(t,["$http","$location","$route","$scope","accountService","authService","bootstrap.dialog","common","config","entityManagerFactory",e])}(),function(){"use strict";function e(e,n,a,r,o){function i(){o.activateController(t).then(function(){d("Activated Register View.")})}function c(){function e(){d("Registration successful, redirect to login page in 2 seconds."),r.startTimer("login")}function t(e){var t=[];for(var n in e.data.modelState)for(var a=0;a<e.data.modelState[n].length;a++)t.push(e.data.modelState[n][a]);u("Registration failed: "+t.join(" "))}var n=o.strongPasswordChecker(s.registration.password);return"weak"==n||""==n?p("Weak password, try to use a long mixed password with: <br/>- lower-case characters<br/>- upper-case characters<br/>- digits<br/>- unique characters."):s.captchaValid?void r.register(s.registration).then(e).catch(t):p("Please enter the correct Math addition.")}var s=this,l=o.logger.getLogFn,u=l(t,"error"),d=l(t),p=l(t,"warning");s.activate=i,s.login=void 0,s.actionType="",s.originalRegistration=null,s.registration={userName:"",password:"",confirmPassword:""},s.register=c,s.captchaValid=!1,i()}var t="registerController";angular.module("app").controller(t,["$routeParams","$scope","$window","authService","common","config","commonConfig","entityManagerFactory",e])}(),function(){"use strict";function e(e){function t(){return e.get(c.getUserInfo).then(function(e){return e})}function n(t){return e.post(c.updateUserInfo,t).then(function(e){return e})}function a(t){return e.post(c.changePassword,t).then(function(e){return e})}function r(t){return e.post(c.setPassword,t).then(function(e){return e})}function o(t){return e.post(c.addLogin,t).then(function(e){return e})}function i(t){return e.post(c.removeLogin,t).then(function(e){return e})}var c={getUserInfo:"api/Account/GetUserInfo",updateUserInfo:"api/Account/UpdateUserInfo",changePassword:"api/Account/ChangePassword",setPassword:"api/Account/SetPassword",addLogin:"api/Account/AddLogin",removeLogin:"api/Account/RemoveLogin"},s={getUserInfo:t,updateUserInfo:n,changePassword:a,setPassword:r,addLogin:o,removeLogin:i};return s}var t="accountService";angular.module("app").factory(t,["$http",e])}(),function(){"use strict";function e(e,t,n){var a={},r=function(e){e.headers=e.headers||{};var t=n.get("authorizationData");return t&&(e.headers.Authorization="Bearer "+t.token),e},o=function(n){var a=e.defer();if(401===n.status){var r=$injector.get("authService");r.refreshToken().then(function(){i(n.config,a)},function(){r.logOut(),t.path("/login"),a.reject(n)})}else a.reject(n);return a.promise},i=function(e,t){$http=$http||$injector.get("$http"),$http(e).then(function(e){t.resolve(e)},function(e){t.reject(e)})};return a.request=r,a.responseError=o,a}var t="authInterceptorService";angular.module("app").factory(t,["$q","$location","localStorageService",e])}(),function(){"use strict";function e(e,t,n,a,r,o){function i(t){return c(),e.post(h.register,t).then(function(e){return e})}function c(){o.remove("authorizationData"),f.isAuth=!1,f.userName=""}function s(t){var a="grant_type=password&username="+t.userName+"&password="+t.password;t.useRefreshTokens&&(a=a+"&client_id="+r.authClientId);var i=n.defer();return e.post(h.token,a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){t.useRefreshTokens?o.set("authorizationData",{token:e.access_token,userName:t.userName,refreshToken:e.refresh_token,useRefreshTokens:!0}):o.set("authorizationData",{token:e.access_token,userName:t.userName,refreshToken:"",useRefreshTokens:!1}),f.isAuth=!0,f.userName=t.userName,f.useRefreshTokens=t.useRefreshTokens,i.resolve(e)}).error(function(e){c(),i.reject(e)}),i.promise}function l(e,n){var r=2e3;n&&(r=0);var o=a(function(){a.cancel(o),t.path("/"+e)},r)}function u(){var e=o.get("authorizationData");e&&(f.isAuth=!0,f.userName=e.userName)}function d(){var t=n.defer(),a=o.get("authorizationData");if(a&&a.useRefreshTokens){var i="grant_type=refresh_token&refresh_token="+a.refreshToken+"&client_id="+r.authClientId;return o.remove("authorizationData"),e.post(h.token,i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){o.set("authorizationData",{token:e.access_token,userName:e.userName,refreshToken:e.refresh_token,useRefreshTokens:!0}),t.resolve(e)}).error(function(e){c(),t.reject(e)}),t.promise}}function p(t){var a=n.defer();return e.get(h.obtainAccessToken,{params:{provider:t.provider,externalAccessToken:t.externalAccessToken}}).success(function(e){o.set("authorizationData",{token:e.access_token,userName:e.userName,refreshToken:"",useRefreshTokens:!1}),f.isAuth=!0,f.userName=e.userName,f.useRefreshTokens=!1,a.resolve(e)}).error(function(e){c(),a.reject(e)}),a.promise}function g(t){var a=n.defer();return e.post(h.registerExternal,t).success(function(e){o.set("authorizationData",{token:e.access_token,userName:e.userName,refreshToken:"",useRefreshTokens:!1}),f.isAuth=!0,f.userName=e.userName,f.useRefreshTokens=!1,a.resolve(e)}).error(function(e){c(),a.reject(e)}),a.promise}var f={isAuth:!1,userName:"",useRefreshTokens:!1},h={token:"/Token",register:"api/Account/Register",login:"api/Account/Login",obtainAccessToken:"api/Account/ObtainLocalAccessToken",registerExternal:"api/Account/RegisterExternal"},m={provider:"",userName:"",externalAccessToken:""},y={register:i,login:s,logout:c,fillAuthData:u,authentication:f,refreshToken:d,obtainAccessToken:p,externalAuthData:m,registerExternal:g,startTimer:l};return y}var t="authService";angular.module("app").factory(t,["$http","$location","$q","$timeout","config","localStorageService",e])}(),function(){"use strict";function e(e,n,a,r,o,i,c,s){function l(){c.init(b),s.init(b),i.init(b),u(),h(),m(),y()}function u(){k.forEach(function(e){Object.defineProperty(x,e,{configurable:!0,get:function(){var t=i.getRepo(e);return Object.defineProperty(x,e,{value:t,configurable:!1,enumerable:!0}),t}})})}function d(){function e(){x.lookup.setLookups(),c.save(),w("Primed the data.")}function t(){var e=b.metadataStore;o.extendMetadata(e)}if(v)return v;var n=c.load(b);return v=n?A.when(w("Loading entities and metadata from Local Storage.")):A.all([x.lookup.getAll(),x.typeOfType.getAll()]).then(t),v.then(e)}function p(){b.hasChanges()&&(b.rejectChanges(),S("Canceled changes.",null,!0))}function g(){function e(){c.save(),S("Saved data.",null,!0)}function t(e){var t=a.appErrorPrefix+"Save failed: "+breeze.saveErrorMessageService.getErrorMessage(e)+"<br/>";throw e.message=t,C(t,e),e}return b.saveChanges().then(e).catch(t)}function f(e){return e.entityAspect.setDeleted()}function h(){b.hasChangesChanged.subscribe(function(e){var t={hasChanges:e.hasChanges};n.$broadcast(T.hasChangesChanged,t)})}function m(){b.entityChanged.subscribe(function(e){e.entityAction===breeze.EntityAction.PropertyChange&&n.$broadcast(T.entitiesChanged,e)})}function y(){e.$on(a.events.storage.storeChanged,function(e,t){w("Updated local storage.",t,!0)}),e.$on(a.events.storage.wipChanged,function(e,t){w("Updated WIP.",t,!0)
}),e.$on(a.events.storage.error,function(e,t){C("Error with local storage. "+t.activity,t,!0)})}var v,T=(o.entityNames,a.events),D=n.logger.getLogFn,w=D(t),C=D(t,"error"),S=D(t,"success"),b=r.newManager(),k=["typeOfType","lookup","validation","admin","attachment","allDataType"],A=n.$q,x={prime:d,cancel:p,save:g,markDeleted:f,zStorage:c,zStorageWip:s};return l(),x}var t="datacontext";angular.module("app").factory(t,["$rootScope","common","config","entityManagerFactory","model","repositories","zStorage","zStorageWip",e])}(),function(){"use strict";var e=angular.module("app");e.directive("ccImgPerson",["config",function(e){function t(e,t,r){r.$observe("ccImgPerson",function(e){e=n+(e||a),r.$set("src",e)})}var n=e.imageSettings.imageBasePath,a=e.imageSettings.unknownPersonImageSource,r={link:t,restrict:"A"};return r}]),e.directive("ccSidebar",function(){function e(e,t){function n(e){function t(){a.slideUp(350),$(".sidebar-dropdown a").removeClass(n)}var n="dropy";e.preventDefault(),r.hasClass(n)?r.hasClass(n)&&(r.removeClass(n),a.slideUp(350)):(t(),a.slideDown(350),r.addClass(n))}var a=t.find(".sidebar-inner"),r=t.find(".sidebar-dropdown a");t.addClass("sidebar"),r.click(n)}var t={link:e,restrict:"A"};return t}),e.directive("ccWidgetClose",function(){function e(e,t,n){function a(e){e.preventDefault(),t.parent().parent().parent().hide(100)}n.$set("href","#"),n.$set("wclose"),t.click(a)}var t={link:e,template:'<i class="fa fa-remove"></i>',restrict:"A"};return t}),e.directive("ccWidgetMinimize",function(){function e(e,t,n){function a(e){e.preventDefault();var n=t.parent().parent().next(".widget-content"),a=t.children("i");n.is(":visible")?(a.removeClass("fa fa-chevron-up"),a.addClass("fa fa-chevron-down")):(a.removeClass("fa fa-chevron-down"),a.addClass("fa fa-chevron-up")),n.toggle(500)}n.$set("href","#"),n.$set("wminimize"),t.click(a)}var t={link:e,template:'<i class="fa fa-chevron-up"></i>',restrict:"A"};return t}),e.directive("ccScrollToTop",["$window",function(e){function t(t,n){function a(){r.scrollTop()>300?n.slideDown():n.slideUp()}var r=$(e);n.addClass("totop"),r.scroll(a),n.find("a").click(function(e){e.preventDefault(),$("body").animate({scrollTop:0},500)})}var n={link:t,template:'<a href="#"><i class="fa fa-chevron-up"></i></a>',restrict:"A"};return n}]),e.directive("ccSpinner",["$window",function(e){function t(t,n,a){t.spinner=null,t.$watch(a.ccSpinner,function(a){t.spinner&&t.spinner.stop(),t.spinner=new e.Spinner(a),t.spinner.spin(n[0])},!0)}var n={link:t,restrict:"A"};return n}]),e.directive("ccWidgetHeader",function(){function e(e,t,n){n.$set("class","widget-head")}var t={link:e,scope:{title:"@",subtitle:"@",rightText:"@",allowCollapse:"@"},templateUrl:"/app/layout/widgetheader.html",restrict:"A"};return t}),e.directive("ccWip",["$route",function(e){function t(t,n){function a(){return e.current&&e.current.title?e.current.title.substr(0,r.length)===r:!1}t.$watch(a,function(e){e?n.addClass("current"):n.removeClass("current")})}function n(){return'<a href="#{{wipRoute.url}}" ><i class="fa fa-asterisk fa-fw" data-ng-class="getWipClass()"></i>Work in Progress ({{wip.length}})</a>'}function a(e){function t(){var t=e.changedEvent;e.$on(t,function(t,n){e.wip=n.wip}),e.wipRoute=e.routes.filter(function(e){return e.config.title===r})[0]}e.wipExists=function(){return!!e.wip.length},e.wipRoute=void 0,e.getWipClass=function(){return e.wipExists()?"fa-asterisk-alert fa-fw":""},t()}var r="Work In Progress",o={controller:["$scope",a],link:t,scope:{wip:"=",changedEvent:"@",routes:"="},template:n(),restrict:"A"};return o}]),e.directive("simpleCaptcha",function(){return{restrict:"E",scope:{valid:"="},template:'<input ng-model="a.value" ng-show="a.input" style="width:2em; text-align: center;" placeholder="?">           <span ng-hide="a.input">{{a.value}}</span>&nbsp;{{operation}}&nbsp;<input ng-model="b.value" ng-show="b.input" style="width:2em; text-align: center;" placeholder="?"><span ng-hide="b.input">{{b.value}}</span>&nbsp;=&nbsp;{{result}}',controller:function(e,t){var n=Math.random()>.5,a=function(e){return Math.floor(e*Math.random())},r=function(e){return parseInt(e,10)};e.a={value:n?void 0:1+a(4),input:n},e.b={value:n?1+a(4):void 0,input:!n},e.operation="+",e.result=5+a(5);var o=e.a,i=e.b,c=e.result,s=function(){if(o.value&&i.value){var n=r(o.value)+r(i.value);e.valid=n==c}else e.valid=!1;t(function(){e.$apply()},0)};e.$watch("a.value",function(){s()}),e.$watch("b.value",function(){s()})}}})}(),function(){"use strict";function e(e,t,n){function a(){e.NamingConvention.camelCase.setAsDefault()}function r(){var t=new e.MetadataStore;return n.configureMetadataStore(t),t}function o(){var t=new e.EntityManager({serviceName:c,metadataStore:s});return t}new e.ValidationOptions({validateOnAttach:!1,validateOnPropertyChange:!1}).setAsDefault(),a();var i=window.location.protocol+"//"+window.location.host+"/",c=t.remoteServiceName,s=r(),l={metadataStore:s,newManager:o,serviceRoot:i,serviceName:c};return l}var t="entityManagerFactory";angular.module("app").factory(t,["breeze","config","model",e])}(),function(){"use strict";function e(e,t){function n(n){var a=e.path(),r=a.lastIndexOf("/",a.length-2),o=a.substring(r-1);if(!t.isNumber(o)){var i=a.substring(0,r+1)+n;e.path(i)}}var a={replaceLocationUrlGuidWithId:n};return a}var t="helper";angular.module("app").factory(t,["$location","common",e])}(),function(){"use strict";function e(e){function t(){e.createAndRegister(r)}function n(t){e.applyValidators(t)}function a(e){breeze.EntityState.Unchanged}var r={typeOfType:"TypeOfType",validation:"Validation",account:"AspNetUser",audit:"AuditLog",error:"ELMAH_Error",attachment:"Attachment",allDataType:"AllDataType"},o={typeOfType:"TypeOfTypes",validation:"Validations",account:"AspNetUsers",audit:"AuditLogs",error:"ELMAH_Errors",attachment:"Attachments",allDataType:"AllDataTypes"},i={configureMetadataStore:t,entityNames:r,controllerNames:o,createNullos:a,extendMetadata:n};return i}var t="model";angular.module("app").factory(t,["model.validation",e])}(),function(){"use strict";function e(e){function n(e){r(e),o(e),s(e),i(e),c(e),l(e),d(e),g(e),h(e),y(e),D(e),S(e),A(e)}function a(e){x=e,I=u(),O=f(),$=p(),P=m(),N.register(I),N.register(O),N.register($),N.register(P)}function r(e){var t=e.getEntityType(x.validation),n=["integer","age","creditCard"];n.forEach(function(e){t.getProperty(e).validators.push(N.integer())})}function o(e){var t=["date","beforeDate","afterDate"],n=e.getEntityType(x.validation);t.forEach(function(e){n.getProperty(e).validators.push(N.date())})}function i(e){var t=e.getEntityType(x.validation);t.getProperty("string").validators.push(N.string())}function c(e){var t=e.getEntityType(x.validation);t.getProperty("phone").validators.push(N.maxLength({maxLength:15})),t.getProperty("zip").validators.push(N.maxLength({maxLength:5}))}function s(e){var t=e.getEntityType(x.validation);t.getProperty("email").validators.push(N.emailAddress())}function l(e){var t=e.getEntityType(x.validation);t.getProperty("uRL").validators.push(N.url())}function u(){function e(e){return e?0!==e.id:!1}var t="requireReferenceEntity",n={messageTemplate:"Missing %displayName%",isRequired:!0},a=new N(t,e,n);return a}function d(e){var t=["name","abbreviation"],n=e.getEntityType(x.typeOfType);t.forEach(function(e){n.getProperty(e).validators.push(I)})}function p(){var e=N.makeRegExpValidator("startsWithDNA",/DNA|dna/,"'%value%' must contains 'DNA' or 'dna'.");return e}function g(e){var t=e.getEntityType(x.validation);t.getProperty("startsWithDPT").validators.push(O)}function f(){var e=N.makeRegExpValidator("containsDNA",/^(DNA|dna)/,"'%value%' must starts with 'DNA' or 'dna'.");return e}function h(e){var t=e.getEntityType(x.validation);t.getProperty("containsDPT").validators.push($)}function m(){var e=N.makeRegExpValidator("integerCustom",/^[1-9]\d*$/,"'%value%' is not a positive integer.");return e}function y(e){var t=["phone","zip"],n=e.getEntityType(x.validation);t.forEach(function(e){n.getProperty(e).validators.push(P)})}function v(e,t){return null==e?!0:e&&e.toString().length<=t.maxLength}function T(e){var t="stringMinMaxLength",n={messageTemplate:"%displayName% must be equal or less than %maxLength% characters.",maxLength:e.maxLength},a=new N(t,v,n);return a}function D(e){var t=T({maxLength:16}),n=e.getEntityType(x.validation);n.getProperty("creditCard").validators.push(t)}function w(e,t){return null==e?!0:e&&e>=t.minValue&&e<=t.maxValue}function C(e){var t="intRange",n={messageTemplate:"%displayName% must be between %minValue% and %maxValue%.",minValue:e.minValue,maxValue:e.maxValue},a=new N(t,w,n);return a}function S(e){var t=C({minValue:1,maxValue:150}),n=e.getEntityType(x.validation);n.getProperty("age").validators.push(t)}function b(e,t){var n,a=t.invalidChars;if(null==e)return!0;for(var r=0;r<e.toString().length;r++)if(n=e.toString().charAt(r),-1!=a.indexOf(n))return!1;return!0}function k(e){var t="specialCharacters",n={messageTemplate:"%displayName% cannot contains '%invalidChars%'",invalidChars:e.invalidChars},a=new N(t,b,n);return a}function A(e){var t=k({invalidChars:"-"}),n=e.getEntityType(x.validation);n.getProperty("creditCard").validators.push(t)}var x,I,$,O,P,N=(e.logger.getLogFn(t),breeze.Validator),L={applyValidators:n,createAndRegister:a};return L}var t="model.validation";angular.module("app").factory(t,["common",e])}(),function(){"use strict";function e(e){function t(e){a=e}function n(t){var n="repository."+t,r=e.get(n);return new r(a)}var a,r={getRepo:n,init:t};return r}var t="repositories";angular.module("app").factory(t,["$injector",e])}(),function(){"use strict";function e(e,t,n){function a(){this.isLoaded=!1}function r(t){function n(){var t=o.loadWipEntity(r);return t?(t.entityAspect.validateEntity(),e.when({entity:t,key:r})):void 0}var a,r=t,o=this.zStorageWip;if(a=n(),!a){if(r=o.findWipKeyByEntityId(this.entityName,r))return a=n(),a?a:e.reject({error:"Couldn't find entity for WIP key "+r});a=this._getById(this.entityName,t)}return a}function o(e,t,n){return u.from(e).orderBy(t).where(n).using(this.manager).executeLocally()}function i(t,n,a){function r(e){return(c=e.entity)?(o.log("Retrieved ["+t+"] id "+c.id+" from remote data source.",c,!0),o.zStorage.save(),c):(o.log("Could not find ["+t+"] id: "+n+".",null,!0),null)}var o=this,i=o.manager;if(!a){var c=i.getEntityByKey(t,n);if(c){if(c.name)o.log("Retrieved ["+t+"] "+c.name+" from cache.",c,!0);else{var s;for(var l in c)(l.indexOf("name")>-1||l.indexOf("Name")>-1&&l.indexOf("$")<0)&&(s=c[l]);null!=s?o.log("Retrieved ["+t+"] "+s+" from cache.",c,!0):o.log("Retrieved ["+t+"] id: "+n+" from cache.",c,!0)}return c.entityAspect.entityState.isDeleted()&&(c=null),e.when(c)}}return i.fetchEntityByKey(t,n).then(r,o._queryFailed)}function c(e){var t=u.from(e).using(this.manager).executeLocally();return t.length}function s(e){return e.inlineCount}function l(e){var t=n.appErrorPrefix+"Error retrieving data. "+e.message;throw d(t,e),e}var u=breeze.EntityQuery,d=t.logger.getLogFn(this.serviceId,"error","config");return a.extend=function(e){e.prototype=new a,e.prototype.constructor=e},a.prototype.getEntityByIdOrFromWip=r,a.prototype._getAllLocal=o,a.prototype._getById=i,a.prototype._getInlineCount=s,a.prototype._getLocalEntityCount=c,a.prototype._queryFailed=l,a.prototype.log=t.logger.getLogFn(this.serviceId),a.prototype.$q=t.$q,a}var t="repository.abstract";angular.module("app").factory(t,["$q","common","config",e])}(),function(){"use strict";function e(e,n){function a(e){this.serviceId=t,this.entityNames=o,this.controllerNames=i,this.manager=e,this.getAll=r}function r(e,t,n,a,r,s){function l(t){return d.log("Retrieved "+e+" from remote data source.",t.results.length,!0),t.results}var u,d=this;switch(e.toLowerCase()){case"account":case"user":e=i.account,u=o.account;break;case"audit":e=i.audit,u=o.audit;break;case"elmah":case"error":e=i.error,u=o.error;break;case"token":e=i.token,u=o.token}return c.from(e).toType(u).using(d.manager).execute().then(l).catch(d._queryFailed)}var o={audit:e.entityNames.audit,error:e.entityNames.error,account:e.entityNames.account},i={audit:e.controllerNames.audit,error:e.controllerNames.error,account:e.controllerNames.account},c=breeze.EntityQuery;return n.extend(a),a}var t="repository.admin";angular.module("app").factory(t,["model","repository.abstract",e])}(),function(){"use strict";function e(e,n,a,r){function o(e){this.serviceId=t,this.entityName=p,this.controllerName=g,this.manager=e,this.zStorage=a,this.zStorageWip=r,this.create=d,this.getAll=i,this.getById=c,this.getCount=s,this.getFilteredCount=l}function i(e,t,n,a,r,o){function i(e){return s.zStorage.areItemsLoaded("allDataTypes",!0),s.zStorage.save(),s.log("Retrieved [AllDataTypes] from remote data source.",e.results.length,!0),c()}function c(){var e=h.not(h.create("bigInt","contains","[Select a "));o&&(e=e.and(u(o)));var t=f.from(g).orderBy(m).take(l).skip(d).using(s.manager).executeLocally();return t}var s=this,l=r||20,d=a?(a-1)*r:0,m=t;return n&&(m=t+" "+n),s.zStorage.areItemsLoaded("allDataTypes")&&!e?s.$q.when(c()):f.from(g).orderBy(m).toType(p).using(s.manager).execute().then(i).catch(s._queryFailed)}function c(e,t){return this._getById(p,e,t)}function s(e){function t(){var e=(u("").and(h.not(h.create("bigInt","contains","[Select a "))),f.from(g).using(n.manager).executeLocally());return e.length}var n=this;return n.zStorage.areItemsLoaded("allDataTypes")&&!e?n.$q.when(t()):f.from(g).take(0).inlineCount().using(n.manager).execute().then(n._getInlineCount)}function l(e){var t=(u(e).and(h.not(h.create("bigInt","contains","[Select a "))),f.from(g).using(this.manager).executeLocally());return t.length}function u(e){return h.create("bigInt","contains",e)}function d(){return this.manager.createEntity(p,{allDataTypeID:breeze.core.getUuid(),uniqueIdentifier:breeze.core.getUuid()})}var p=e.entityNames.allDataType,g=e.controllerNames.allDataType,f=breeze.EntityQuery,h=breeze.Predicate;return n.extend(o),o}var t="repository.allDataType";angular.module("app").factory(t,["model","repository.abstract","zStorage","zStorageWip",e])}(),function(){"use strict";function e(e,n,a,r){function o(e){this.serviceId=t,this.entityName=p,this.controllerName=g,this.manager=e,this.zStorage=a,this.zStorageWip=r,this.create=d,this.getAll=i,this.getById=c,this.getCount=s,this.getFilteredCount=l}function i(e,t,n,a,r,o){function i(e){return s.zStorage.areItemsLoaded("attachments",!0),s.zStorage.save(),s.log("Retrieved [Attachments] from remote data source.",e.results.length,!0),c()}function c(){var e=h.not(h.create("fileName","contains","[Select a "));o&&(e=e.and(u(o)));var t=f.from(g).where(e).orderBy(m).take(l).skip(d).using(s.manager).executeLocally();return t}var s=this,l=r||20,d=a?(a-1)*r:0,m=t;return n&&(m=t+" "+n),s.zStorage.areItemsLoaded("attachments")&&!e?s.$q.when(c()):f.from(g).orderBy(m).toType(p).using(s.manager).execute().then(i).catch(s._queryFailed)}function c(e,t){return this._getById(p,e,t)}function s(e){function t(){var e=u("").and(h.not(h.create("fileName","contains","[Select a "))),t=f.from(g).where(e).using(n.manager).executeLocally();return t.length}var n=this;return n.zStorage.areItemsLoaded("attachments")&&!e?n.$q.when(t()):f.from(g).take(0).inlineCount().using(n.manager).execute().then(n._getInlineCount)}function l(e){var t=u(e).and(h.not(h.create("fileName","contains","[Select a "))),n=f.from(g).where(t).using(this.manager).executeLocally();return n.length}function u(e){return h.create("fileName","contains",e)}function d(){return this.manager.createEntity(p,{attachmentID:breeze.core.getUuid(),createdDate:new Date})}var p=e.entityNames.attachment,g=e.controllerNames.attachment,f=breeze.EntityQuery,h=breeze.Predicate;return n.extend(o),o}var t="repository.attachment";angular.module("app").factory(t,["model","repository.abstract","zStorage","zStorageWip",e])}(),function(){"use strict";function e(e,n,a){function r(e){this.serviceId=t,this.entityName=c,this.manager=e,this.zStorage=a,this.getAll=o,this.setLookups=i}function o(){function t(t){return t.results.length>0&&(l=t.results[0].parentTypeOfTypes,u=t.results[0].types),e.createNullos(n.manager),n.zStorage.save(),n.log("Retrieved [Lookups]",t,!0),!0}var n=this;return s.from("Lookups").using(n.manager).execute().then(t,n._queryFailed)}function i(){this.lookupCachedData={parentTypeOfTypes:l,types:u}}var c="lookups",s=(e.entityNames,e.controllerNames,breeze.EntityQuery),l=(breeze.Predicate,[]),u=[];return n.extend(r),r}var t="repository.lookup";angular.module("app").factory(t,["model","repository.abstract","zStorage",e])}(),function(){"use strict";function e(e,n,a,r,o,i){function c(e){this.serviceId=t,this.entityName=v,this.controllerName=T,this.manager=e,this.zStorage=r,this.zStorageWip=o,this.create=f,this.create_Validation=h,this.getAll=s,this.getAllServer=l,this.getById=u,this.getById_Validation=m,this.getById_ValidationNG=y,this.getCount=d,this.getFilteredCount=p}function s(e,t,n,a,r,o){function i(e){return s.zStorage.areItemsLoaded("typeOfTypes",!0),s.zStorage.save(),s.log("Retrieved [Type Of Types] from remote data source.",e.results.length,!0),c()}function c(){var e=w.not(w.create("name","contains","[Select a "));o&&(e=e.and(g(o)));var t=D.from(T).where(e).orderBy(d).take(l).skip(u).using(s.manager).executeLocally();return t}var s=this,l=r||20,u=a?(a-1)*r:0,d=t;return n&&(d=t+" "+n),s.zStorage.areItemsLoaded("typeOfTypes")&&!e?s.$q.when(c()):D.from(T).orderBy(d).toType(v).using(s.manager).execute().then(i).catch(s._queryFailed)}function l(e,t,n,a,r,o){function i(e){return c.log("Retrieved [Type Of Types] from remote data source.",e.results.length,!0),e.results}var c=this,s=r||20,l=a?(a-1)*r:0,u=w.not(w.create("name","contains","[Select a "));o&&(u=u.and(g(o)));var d=t;return n&&(d=t+" "+n),D.from(T).where(u).orderBy(d).take(s).skip(l).using(c.manager).execute().then(i).catch(c._queryFailed)}function u(e,t){return this._getById(v,e,t)}function d(e){function t(){var e=g("").and(w.not(w.create("name","contains","[Select a "))),t=D.from(T).where(e).using(n.manager).executeLocally();return t.length}var n=this;return n.zStorage.areItemsLoaded("typeOfTypes")&&!e?n.$q.when(t()):D.from(T).take(0).inlineCount().using(n.manager).execute().then(n._getInlineCount)}function p(e){var t=g(e).and(w.not(w.create("name","contains","[Select a "))),n=D.from(T).where(t).using(this.manager).executeLocally();return n.length}function g(e){return w.create("name","contains",e).or("abbreviation","contains",e)}function f(){return this.manager.createEntity(v,{typeOfTypeID:breeze.core.getUuid(),createdDate:new Date,parentID:i.emptyGuid,typeID:i.emptyGuid})}function h(){return this.manager.createEntity("Validation",{validationID:breeze.core.getUuid()})}function m(e,t){return this._getById("Validation",e,t)}function y(t){var n=window.location.protocol+"//"+window.location.host+"/",a="breeze/Breeze/";return e.get(n+a+"Validations?$filter=ValidationID%20eq%20guid%27"+t+"%27").then(function(e){return e.data})}var v=n.entityNames.typeOfType,T=n.controllerNames.typeOfType,D=breeze.EntityQuery,w=breeze.Predicate;return a.extend(c),c}var t="repository.typeOfType";angular.module("app").factory(t,["$http","model","repository.abstract","zStorage","zStorageWip","common",e])}(),function(){"use strict";function e(e,n,a,r){function o(){c(),i()}function i(){n.$on("$routeChangeError",function(n,a,o,i){if(!s){s=!0;var c="Error routing: "+(a&&a.name)+". "+(i.msg||"");r.logWarning(c,a,t,!0),e.path("/")}})}function c(){n.$on("$routeChangeSuccess",function(e,t){s=!1;var r=a.docTitle+(t.title||"");n.title=r})}var s=!0,l={setRoutingHandlers:o};return l}var t="routeMediator";angular.module("app").factory(t,["$location","$rootScope","config","logger",e])}(),function(){"use strict";function e(e,n){function a(){n.activateController([],t).then(function(){s("Activated Boostrap Demo View.")})}function r(e){return new Array(e)}function o(e){switch(e){default:s("Toast default notification.");break;case"success":l("Toast success notification.");break;case"warn":u("Toast warning notification.");break;case"error":d("Toast error notification.");break;case"clear":toastr.clear()}}function i(t){switch(t){case"error":return e.deleteDialog("item");default:return e.confirmationDialog("Modal heading","Modal body","OK","Cancel")}}var c=n.logger.getLogFn,s=c(t),l=c(t,"success"),u=c(t,"warning"),d=c(t,"error"),p=this;p.title={toastr:"Toastr v.2.0.3",fa:"FontAwesome v4.2.0",bs:"Bootstrap v3.2.0"},p.subtitle={fa:"The iconic font and CSS toolkit",toastr:"Simple Javascript toast notifications",bs:"HTML, CSS, and Javascript code designed to help build user interface components"},p.showToast=o,p.repeat=r,p.showModal=i,p.activate=a,a()}var t="stylingDemoController";angular.module("app").controller(t,["bootstrap.dialog","common",e])}(),function(){"use strict";function e(e,n,a,r,o,i,c,s,l,u,d){function p(){return I.hasChanges&&!I.isSaving}function g(){v(),D(),C(),i.activateController([f()],t).then(k())}function f(){var e=n.id;return"new"===e?(I.actionType="I",I.typeOfType=u.typeOfType.create()):u.typeOfType.getEntityByIdOrFromWip(e).then(function(e){I.actionType="U",I.originalTypeOfType=x(e),P=e.key,I.typeOfType=e.entity||e},function(){$("Unable to get Type Of Type "+e),y()})}function h(){r.history.back()}function m(){u.cancel(),A(),d.replaceLocationUrlGuidWithId(I.typeOfType.typeOfTypeID),I.typeOfType.entityAspect.entityState.isDetached()&&y()}function y(){e.path("/typeOfTypes")}function v(){a.$on("$destroy",function(){b(!0),u.cancel()})}function T(){return I.isSaving=!0,u.save().then(function(){I.isSaving=!1,i.$broadcast(s.config.userActionAddedEvent,I.actionType,l.controllerNames.typeOfType,"D"!=I.actionType?I.originalTypeOfType:x(I.typeOfType),"D"!=I.actionType?x(I.typeOfType):null),A(),d.replaceLocationUrlGuidWithId(I.typeOfType.typeOfTypeID)},function(){I.isSaving=!1})}function D(){a.$on(c.events.hasChangesChanged,function(e,t){I.hasChanges=t.hasChanges})}function w(){function e(){function e(){A(),y()}function t(){m()}I.actionType="D",u.markDeleted(I.typeOfType),I.save().then(e).catch(t)}return o.deleteDialog("Type Of Type").then(e)}function C(){var e=u.lookup.lookupCachedData;I.parentTypeOfTypes=e.parentTypeOfTypes,I.types=e.types}function S(){if(I.typeOfType){var e=I.typeOfType.name||"[New TypeOfType] id: "+I.typeOfType.typeOfTypeID;P=u.zStorageWip.storeWipEntity(I.typeOfType,P,O,e)}}function b(e){i.debouncedThrottle(t,S,1e3,e)}function k(){a.$on(c.events.entitiesChanged,function(){b()})}function A(){u.zStorageWip.removeWipEntity(P)}function x(e){return{TypeOfTypeID:e.typeOfTypeID,Abbreviation:e.abbreviation,Name:e.name,Key:e.key,Order:e.order,ParentID:e.parentID,TypeID:e.typeID,Value:e.value,CreatedDate:e.createdDate,UpdatedDate:e.updatedDate,CreateBy:e.createBy,UpdateBy:e.updateBy}}var I=this,$=i.logger.getLogFn(t,"error"),O=l.entityNames.typeOfType,P=void 0;I.activate=g,I.typeOfType=void 0,I.actionType="",I.originalTypeOfType=null,I.parentTypeOfTypes=[],I.types=[],I.goBack=h,I.cancel=m,I.save=T,I.deleteTypeOfType=w,I.hasChanges=!1,I.isSaving=!1,Object.defineProperty(I,"canSave",{get:p}),g()}var t="typeOfTypeItemController";angular.module("app").controller(t,["$location","$routeParams","$scope","$window","bootstrap.dialog","common","config","commonConfig","model","datacontext","helper",e])}(),function(){"use strict";function e(e,n,a,r,o){function i(){a.activateController([c(),s()],t).then(function(){b("Activated Type Of Types View.")})}function c(e){return o.typeOfType.getAll(e,A.sorting.orderBy,A.sorting.orderDesc,A.paging.currentPage,A.paging.pageSize,A.typeOfTypeSearch).then(function(t){return A.typeOfTypes=t,(!A.typeOfTypeCount||e)&&l(),u(),t})}function s(e){return o.typeOfType.getAllServer(e,A.sortingServer.orderBy,A.sortingServer.orderDesc,A.pagingServer.currentPage,A.pagingServer.pageSize,A.typeOfTypesServerSearch).then(function(t){A.filteredTypeoftypesserver=t,(!A.typeOfTypeFilteredCountServer||e)&&d(),p()})}function l(){return o.typeOfType.getCount().then(function(e){return A.typeOfTypeCount=e})}function u(){A.typeOfTypeFilteredCount=o.typeOfType.getFilteredCount(A.typeOfTypeSearch)}function d(){return o.typeOfType.getCount().then(function(e){return A.typeOfTypeCountServer=e})}function p(){A.typeOfTypeFilteredCountServer=o.typeOfType.getFilteredCount(A.typeOfTypesServerSearch)}function g(){c()}function f(){s()}function h(){c(!0)}function m(){s(!0)}function y(e){e.keyCode===k.esc&&(A.typeOfTypeSearch=""),c()}function v(){return s()}function T(e){var t=a.textContains,n=A.typeOfTypesServerSearch,r=n?t(e.name,n)||t(e.abbreviation,n):!0;return r}function D(e){e=a.lowerCaseFirstLetter(e),e=a.replaceSpecialCharacters(e," "),A.sorting.orderBy=e,A.sorting.orderDesc=""==A.sorting.orderDesc?"desc":"",c()}function w(e){return e=a.lowerCaseFirstLetter(e),e=a.replaceSpecialCharacters(e," "),A.sortingServer.orderBy=e,A.sortingServer.orderDesc=""==A.sortingServer.orderDesc?"desc":"",s()}function C(t){t&&t.typeOfTypeID&&e.path("/typeOfType/"+t.typeOfTypeID)}var S=a.logger.getLogFn,b=S(t),k=r.keyCodes,A=this;A.typeOfTypes=[],A.typeOfTypeCount=0,A.typeOfTypeFilteredCount=0,A.typeOfTypeSearch="",A.title="Type Of Types",A.refresh=h,A.search=y,A.goToTypeOfType=C,A.paging={currentPage:1,maxPagesToShow:5,pageSize:15},A.pageChanged=g,Object.defineProperty(A.paging,"pageCount",{get:function(){return Math.floor(A.typeOfTypeFilteredCount/A.paging.pageSize)+1}}),A.setSort=D,A.theads=["Name","Abbreviation","Created Date"],A.sorting={orderBy:"name",orderDesc:""},A.typeOfTypesServerSearch="",A.filteredTypeoftypesserver=[],A.typeOfTypesServerFilter=T,A.typeOfTypeCountServer=0,A.typeOfTypeFilteredCountServer=0,A.refreshServer=m,A.searchServer=v,A.pagingServer={currentPage:1,maxPagesToShow:5,pageSize:15},A.pageChangedServer=f,A.setSortServer=w,A.sortingServer={orderBy:"name",orderDesc:""},i()}var t="typeOfTypeListController";angular.module("app").controller(t,["$location","$timeout","common","config","datacontext",e])}(),function(){"use strict";function e(e,n,a){function r(){c("DNA SPA-Web/Hybrid-Mobile Demo loaded!",null,!0),n.activateController([],t)}function o(e){i.isBusy=e}var i=this,c=n.logger.getLogFn(t,"success"),s=a.events;i.busyMessage="Please wait ...",i.isBusy=!0,i.spinnerOptions={radius:40,lines:7,length:0,width:30,speed:1.7,corners:1,trail:100,color:"#F58A00"},i.isSideBarVisible=!0,r(),e.$on("$routeChangeStart",function(){o(!0)}),e.$on(s.controllerActivateSuccess,function(){o(!1)}),e.$on(s.sideBarToggle,function(e){i.isSideBarVisible=e}),e.$on(s.userActionAdded,function(e,t,n,a,r){var o=new XMLHttpRequest;o.open("POST","api/Home/WriteAuditLog"),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify(JSON.decycle({Id:0,Who:"",What:t,When:new Date((new Date).toUTCString()),TableName:n,TableIdValue:"I"==t?null:"D"==t?a.TypeOfTypeID:r.TypeOfTypeID,OldData:a,NewData:r})))})}var t="shell";angular.module("app").controller(t,["$rootScope","common","config",e])}(),function(){"use strict";function e(e,t,n,a,r){function o(){i(),l.wip=a.zStorageWip.getWipSummary()}function i(){l.navRoutes=r.filter(function(e){return e.config.settings&&e.config.settings.nav}).sort(function(e,t){return e.config.settings.nav-t.config.settings.nav})}function c(t){if(!t.config.title||!e.current||!e.current.title)return"";var n=t.config.title;return e.current.title.substr(0,n.length)===n?"current":""}function s(){function e(){a.zStorage.clear()}function n(){}return t.deleteDialog("Local Storage and Work In Progress").then(e,n)}var l=this;l.clearStorage=s,l.routes=r,l.wip=[],l.wipChangedEvent=n.events.storage.wipChanged,l.isCurrent=c,o()}var t="sidebar";angular.module("app").controller(t,["$route","bootstrap.dialog","config","datacontext","routes",e])}(),function(){"use strict";function e(e,t,n,a){function r(){function e(){n.logout(),t.path("/")}return a.confirmationDialog("Logout","Do you want to logout?","Yes","No").then(e)}var o=this;o.logout=r,o.authentication=n.authentication}var t="topnav";angular.module("app").controller(t,["$scope","$location","authService","bootstrap.dialog",e])}(),function(){"use strict";function e(e,n,a,r){function o(){r.activateController([],t).then(function(){l("Activated UI Elements View")})}function i(){d.progress+=c(0,10),d.progress>c(70,90)&&(d.progress=c(5,50),f=(f+1)%d.labels.length,d.status=d.labels[f]),n(i,200)}function c(e,t){return e+Math.floor(Math.random()*(t-e))}var s=r.logger.getLogFn,l=s(t),u=s(t,"warn"),d=this;o(),d.chartTypes=[{id:"line",title:"Line"},{id:"spline",title:"Smooth line"},{id:"area",title:"Area"},{id:"areaspline",title:"Smooth area"},{id:"column",title:"Column"},{id:"bar",title:"Bar"},{id:"pie",title:"Pie"},{id:"scatter",title:"Scatter"}],d.chartSeries=[{name:"Smooth Area",data:[1,2,4,7,3],type:"areaspline"},{name:"Line",data:[3,1,null,5,2],connectNulls:!0,type:"line"},{name:"Column 1",data:[5,2,2,3,5],type:"column"},{name:"Column 2",data:[1,1,2,3,2],type:"column"}],d.chartStack=[{id:"",title:"No"},{id:"normal",title:"Normal"},{id:"percent",title:"Percent"}],d.addPoints=function(){var e=d.chartConfig.series,t=Math.floor(Math.random()*e.length);e[t].data=e[t].data.concat([1,10,20])},d.addSeries=function(){for(var e=[],t=0;10>t;t++)e.push(Math.floor(20*Math.random())+1);d.chartConfig.series.push({data:e})},d.removeSeries=function(e){function t(){if(1==d.chartConfig.series.length)return u("HighCharts: There should be at least 1 series.");var t=d.chartConfig.series;t.splice(e,1)}return a.confirmationDialog("Remove","Do you want remove this series?","Yes","No").then(t)},d.chartConfig={options:{chart:{type:d.chartTypes[0].id},plotOptions:{series:{dataLabels:{enabled:!0,style:{fontSize:"15px"}},stacking:""}}},credits:{enabled:!0},series:d.chartSeries,title:{text:"HighCharts Demo"}};for(var p="US,Germany,UK,Japan,Italy,Greece".split(","),g=[],f=0;100>f;f++)g.push({id:f,country:p[f%p.length],date:new Date(2014,f%12,f%28),amount:1e4*Math.random(),active:f%4==0});d.data=g,d.selectionMode="CellRange",d.isReadOnly=!1,d.cvData=new wijmo.collections.CollectionView(g),d.cvData.pageSize=20,d.groupBy="",e.$watch("vm.groupBy",function(){var e=d.cvData;if(e.groupDescriptions.clear(),d.groupBy)for(var t=d.groupBy.split(","),n=0;n<t.length;n++){var a=t[n];if("date"==a){var r=new wijmo.collections.PropertyGroupDescription(a,function(e){return e.date.getFullYear()});e.groupDescriptions.push(r)}else if("amount"==a){var r=new wijmo.collections.PropertyGroupDescription(a,function(e){return e.amount>=5e3?"> 5,000":e.amount>=500?"500 to 5,000":"< 500"});e.groupDescriptions.push(r)}else{var r=new wijmo.collections.PropertyGroupDescription(a);e.groupDescriptions.push(r)}}}),d.filter="";var h,m;d.cvData.filter=function(e){return d.filter?e.country.toLowerCase().indexOf(m)>-1:!0},e.$watch("vm.filter",function(){h&&clearTimeout(h),h=setTimeout(function(){m=d.filter.toLowerCase(),d.cvData.refresh()},500)}),d.getAmountColor=function(e){return 2500>e?"black":5e3>e?"green":"blue"},d.useTheme=!1,d.theme="",e.$watch("vm.useTheme",function(){d.theme=d.useTheme?"custom-flex-grid":""}),d.treeData=[{name:"♫ Adriane Simione",items:[{name:"♪ Intelligible Sky",items:[{name:"Theories",length:"2:02"},{name:"Giant Eyes",length:"3:29"},{name:"Jovian Moons",length:"1:02"},{name:"Open Minds",length:"2:41"},{name:"Spacetronic Eyes",length:"3:41"}]}]},{name:"♫ Amy Winehouse",items:[{name:"♪ Back to Black",items:[{name:"Addicted",length:"1:34"},{name:"He Can Only Hold Her",length:"2:22"},{name:"Some Unholy War",length:"2:21"},{name:"Wake Up Alone",length:"3:43"},{name:"Tears Dry On Their Own",length:"1:25"}]},{name:"♪ Live in Paradiso",items:[{name:"You Know That I'm No Good",length:"2:32"},{name:"Wake Up Alone",length:"1:04"},{name:"Valerie",length:"1:22"},{name:"Tears Dry On Their Own",length:"3:15"},{name:"Rehab",length:"3:40"}]}]},{name:"♫ Black Sabbath",items:[{name:"♪ Heaven and Hell",items:[{name:"Neon Knights",length:"3:03"},{name:"Children of the Sea",length:"2:54"},{name:"Lady Evil",length:"1:43"},{name:"Heaven and Hell",length:"2:23"},{name:"Wishing Well",length:"3:22"},{name:"Die Young",length:"2:21"}]},{name:"♪ Never Say Die!",items:[{name:"Swinging The Chain",length:"4:32"},{name:"Breakout",length:"3:54"},{name:"Over To You",length:"2:43"},{name:"Air Dance",length:"1:34"},{name:"Johnny Blade",length:"1:02"},{name:"Never Say Die",length:"2:11"}]},{name:"♪ Paranoid",items:[{name:"Rat Salad",length:"3:44"},{name:"Hand Of Doom",length:"4:21"},{name:"Electric Funeral",length:"2:12"},{name:"Iron Man",length:"3:22"},{name:"War Pigs",length:"3:13"}]}]},{name:"♫ Brand X",items:[{name:"♪ Unorthodox Behaviour",items:[{name:"Touch Wood",length:"2:54"},{name:"Running of Three",length:"1:34"},{name:"Unorthodox Behaviour",length:"2:23"},{name:"Smacks of Euphoric Hysteria",length:"3:12"},{name:"Euthanasia Waltz",length:"2:22"},{name:"Nuclear Burn",length:"4:01"}]}]}],d.countryNames=["Albania","Andorra","Armenia","Austria","Azerbaijan","Belarus","Belgium","Bosnia & Herzegovina","Bulgaria","Croatia","Cyprus","Czech Republic","Denmark","Estonia","Finland","France","Georgia","Germany","Greece","Hungary","Iceland","Ireland","Italy","Kosovo","Latvia","Liechtenstein","Lithuania","Luxembourg","Macedonia","Malta","Moldova","Monaco","Montenegro","Netherlands","Norway","Poland","Portugal","Romania","Russia","San Marino","Serbia","Slovakia","Slovenia","Spain","Sweden","Switzerland","Turkey","Ukraine","United Kingdom","Vatican City"],d.productsDataSource={type:"odata",serverFiltering:!0,transport:{read:{url:"https://demos.telerik.com/kendo-ui/service/Northwind.svc/Products"}}},d.customersDataSource={transport:{read:{dataType:"jsonp",url:"https://demos.telerik.com/kendo-ui/service/Customers"}}},d.customOptions={dataSource:d.customersDataSource,dataTextField:"ContactName",dataValueField:"CustomerID",headerTemplate:'<div class="dropdown-header"><span class="k-widget k-header">Photo</span><span class="k-widget k-header">Contact info</span></div>',valueTemplate:'<img class="selected-value" src="https://demos.telerik.com/kendo-ui/content/web/Customers/{{dataItem.CustomerID}}.jpg" alt="{{dataItem.CustomerID}}" /><span>{{dataItem.ContactName}}</span>',template:'<span class="k-state-default"><img src="https://demos.telerik.com/kendo-ui/content/web/Customers/{{dataItem.CustomerID}}.jpg" alt="{{dataItem.CustomerID}}" /></span><span class="k-state-default"><h3>{{dataItem.ContactName}}</h3><p>{{dataItem.CompanyName}}</p></span>'},d.html="<h1>Kendo Editor</h1>\n\n<p>Note that “change” is triggered when the editor loses focus.\n<br /> That's when the Angular scope gets updated.</p>",d.phone="555 123 4567",d.cc="1234 1234 1234 1234",d.ssn="003-12-3456",d.post="W1N 1AC",d.menuOrientation="horizontal",d.onSelect=function(e){l($(e.item.firstChild).text())
},d.selectOptions={placeholder:"Select products...",dataTextField:"ProductName",dataValueField:"ProductID",autoBind:!1,dataSource:{type:"odata",serverFiltering:!0,transport:{read:{url:"https://demos.telerik.com/kendo-ui/service/Northwind.svc/Products"}}}},d.selectedIds=[4,7],d.ntValue=50,d.status="Working...",d.progress=0,d.labels=["Installing start menu items","Registering components","Having a coffee"];var f=-1;i(),d.orientation="horizontal"}var t="uiController";angular.module("app").controller(t,["$scope","$timeout","bootstrap.dialog","common",e])}(),function(){"use strict";function e(e,n,a,r,o,i,c,s){function l(){return T.hasChanges&&!T.isSaving}function u(){h(),y(),i.activateController([d()],t)}function d(){function e(){T.validation.integer=Math.floor(10*Math.random()+1),T.validation.date=new Date,T.validation.beforeDate=new Date,T.validation.afterDate=new Date}var t=n.id;return"new"===t?(T.validation=s.typeOfType.create_Validation(),e(),T.validation):s.typeOfType.getById_Validation(t).then(function(e){T.validation=e},function(){D("Unable to get Validation "+t)})}function p(){r.history.back()}function g(){s.cancel(),T.validation.entityAspect.entityState.isDetached()&&f()}function f(){e.path("/validations")}function h(){a.$on("$destroy",function(){s.cancel()})}function m(){return T.isSaving=!0,s.save().then(function(){T.isSaving=!1},function(){T.isSaving=!1})}function y(){a.$on(c.events.hasChangesChanged,function(e,t){T.hasChanges=t.hasChanges})}function v(){function e(){function e(){f()}function t(){g()}s.markDeleted(T.validation),T.save().then(e).catch(t)}return o.deleteDialog("Validation").then(e)}var T=this,D=i.logger.getLogFn(t,"error");T.activate=u,T.validation=void 0,T.goBack=p,T.cancel=g,T.save=m,T.deleteValidation=v,T.hasChanges=!1,T.isSaving=!1,Object.defineProperty(T,"canSave",{get:l}),T.dateFormats=["dd-MMMM-yyyy","dd-MM-yyyy","MM-dd-yyyy","MMMM-dd-yyyy","yyyy-MM-dd","shortDate","mediumDate","longDate","fullDate"],T.datePicker={minDate:"1900-01-01",maxDate:"2100-12-31",format:T.dateFormats[0],dateOptions:{formatYear:"yyyy",startingDay:1}},a.clear=function(){T.validation.date=null},a.disabled=function(){},a.toggleMin=function(){a.minDate=a.minDate?null:new Date}(),a.open=function(e){e.preventDefault(),e.stopPropagation(),a.opened=!0},a.openMinDate=function(e){e.preventDefault(),e.stopPropagation(),a.openedMinDate=!0},a.openMaxDate=function(e){e.preventDefault(),e.stopPropagation(),a.openedMaxDate=!0},u()}var t="validationDetail";angular.module("app").controller(t,["$location","$routeParams","$scope","$window","bootstrap.dialog","common","config","datacontext",e])}(),function(){"use strict";function e(e,n,a,r,o,i,c,s){function l(){return D.hasChanges&&!D.isSaving}function u(){m(),v(),i.activateController([d(),p()],t)}function d(){var e=n.id;return"new"===e?(D.validation=s.typeOfType.create_Validation(),D.validation):s.typeOfType.getById_Validation(e).then(function(e){D.validation=e},function(){S("Unable to get Validation "+e)})}function p(){var e=n.id;return"new"===e?D.validationNG:s.typeOfType.getById_ValidationNG(e).then(function(e){D.validationNG=e[0],D.validationNG.Date=moment(D.validationNG.Date).format("YYYY-MM-DD"),D.validationNG.BeforeDate=moment(D.validationNG.BeforeDate).format("YYYY-MM-DD"),D.validationNG.AfterDate=moment(D.validationNG.AfterDate).format("YYYY-MM-DD")},function(){S("Unable to get Validation "+e)})}function g(){r.history.back()}function f(){s.cancel(),D.validation.entityAspect.entityState.isDetached()&&h()}function h(){e.path("/validations")}function m(){a.$on("$destroy",function(){s.cancel()})}function y(){return D.isSaving=!0,s.save().then(function(){D.isSaving=!1},function(){D.isSaving=!1})}function v(){a.$on(c.events.hasChangesChanged,function(e,t){D.hasChanges=t.hasChanges})}function T(){function e(){function e(){h()}function t(){f()}s.markDeleted(D.validation),D.save().then(e).catch(t)}return o.deleteDialog("Validation").then(e)}var D=this,w=i.logger.getLogFn,C=w(t),S=w(t,"error");D.activate=u,D.validation=void 0,D.validationNG=void 0,D.goBack=g,D.cancel=f,D.save=y,D.deleteValidation=T,D.hasChanges=!1,D.isSaving=!1,Object.defineProperty(D,"canSave",{get:l}),D.dateFormats=["dd-MMMM-yyyy","dd-MM-yyyy","MM-dd-yyyy","MMMM-dd-yyyy","yyyy-MM-dd","shortDate","mediumDate","longDate","fullDate"],D.datePicker={minDate:"1900-01-01",maxDate:"2100-12-31",format:D.dateFormats[6],dateOptions:{formatYear:"yyyy",startingDay:1}},a.clear=function(){D.validation.date=null},a.disabled=function(){},a.toggleMin=function(){a.minDate=a.minDate?null:new Date}(),a.open=function(e){e.preventDefault(),e.stopPropagation(),a.opened=!0},a.openMinDate=function(e){e.preventDefault(),e.stopPropagation(),a.openedMinDate=!0},a.openMaxDate=function(e){e.preventDefault(),e.stopPropagation(),a.openedMaxDate=!0},u(),D.integerRegEx=/^(\+|-)?\d+$/,D.creditCardRegEx=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,D.phoneNumberRegex=/\(\d{3}\) \d{3}-\d{4}/,D.zipRegex=/^\d{5}(?:[-\s]\d{4})?$/,D.startsWithDnaRegex=/DNA|dna/,D.containsDnaRegex=/^(DNA|dna)/,a.submitted=!1,D.submit=function(e){return a.submitted=!0,e.$valid?C("Form is valid."):S("Form is not valid.")},D.interacted=function(e){return a.submitted||e.$dirty}}var t="validationDetailController";angular.module("app").controller(t,["$location","$routeParams","$scope","$window","bootstrap.dialog","common","config","datacontext",e])}(),function(){"use strict";function e(e,n,a,r){function o(){n.activateController([i(),c()],t).then(function(){T=n.createSearchThrottle(v,"validations"),v.validationsSearch&&T(!0),m("Activated Validations View.")})}function i(){function e(e){return v.validations=v.filteredValidations=e.results,m("Retrieved [Validations] from remote data source.",e.results.length,!0),e}return breeze.EntityQuery.from("Validations").using(r.newManager()).execute().then(e).catch(self._queryFailed)}function c(e){function t(e){return v.validationsServer=v.filteredvalidationsserver=e.results,m("Retrieved [Validations] from remote data source.",e.results.length,!0),e}return breeze.EntityQuery.from("Validations").where(e).using(r.newManager()).execute().then(t).catch(self._queryFailed)}function s(t){t&&t.validationID&&e.path("/validation/"+t.validationID)}function l(){i()}function u(){c()}function d(e){e=e.replace(/ /g,""),e=e.replace(/"/g,""),v.sorting.orderBy=e.charAt(0).toLowerCase()+e.slice(1),v.sorting.orderDesc=!v.sorting.orderDesc}function p(e){e.keyCode===y.esc?(v.validationsSearch="",T(!0)):T()}function g(e){var t=n.textContains,a=v.validationsSearch,r=e.date,o=e.beforeDate,i=e.afterDate;r=n.formatDate(r),o=n.formatDate(o),i=n.formatDate(i);var c=a?t(e.integer,a)||t(e.string,a)||t(r,a)||t(o,a)||t(i,a)||t(e.age,a)||t(e.email,a)||t(e.phone,a)||t(e.uRL,a)||t(e.zip,a)||t(e.startsWithDPT,a)||t(e.containsDPT,a):!0;return c}function f(){m("undone")}var h=n.logger.getLogFn,m=h(t),y=a.keyCodes,v=this;v.validationsSearch="",v.validations=[],v.filteredValidations=[];var T=function(){};v.validationsFilter=g,v.search=p,v.refresh=l,v.title="Validations",v.goToValidation=s,v.theads=["Integer","String","Age","Email","Phone"],v.setSort=d,v.sorting={orderBy:"integer",orderDesc:!1},v.validationsSearchServer="",v.validationsServer=[],v.filteredvalidationsserver=[];v.validationsFilter=g,v.searchServer=f,v.refreshServer=u,v.imageSource="./Content/images/angularjs.png";breeze.Predicate;o()}var t="validationListController";angular.module("app").controller(t,["$location","common","config","entityManagerFactory",e])}(),function(){"use strict";function e(e,n,a,r){function o(){n.activateController([i()],t).then(function(){d("Activated Validations View.")})}function i(){function e(e){return p.validations=e.results,d("Retrieved [Validations] from remote data source.",e.results.length,!0),e}return breeze.EntityQuery.from("Validations").using(r.newManager()).execute().then(e).catch(self._queryFailed)}function c(t){t&&t.validationID&&e.path("/validation/"+t.validationID)}function s(){i()}function l(e){e=e.replace(/ /g,""),e=e.replace(/"/g,""),p.sorting.orderBy=e.charAt(0).toLowerCase()+e.slice(1),p.sorting.orderDesc=!p.sorting.orderDesc}var u=n.logger.getLogFn,d=u(t),p=(a.keyCodes,this);p.validations=[],p.refresh=s,p.title="Validations",p.goToValidation=c,p.theads=["Integer","String","Date","Before Date","After Date","Age","Credit Card","Email","Phone","URL","Zip",'Starts With "DPT"','Contains "DPT"'],p.setSort=l,p.sorting={orderBy:"integer",orderDesc:!1},o()}var t="validations";angular.module("app").controller(t,["$location","common","config","entityManagerFactory",e])}(),function(){"use strict";function e(e,n,a,r,o,i){function c(){r.activateController([s()],t),e.$on(o.events.storage.wipChanged,function(e,t){p.wip=t})}function s(){p.wip=i.zStorageWip.getWipSummary()}function l(){function e(){p.isDeleting=!1}function t(){i.zStorageWip.clearAllWip(),p.isDeleting=!1}return p.isDeleting=!0,a.deleteDialog("Work in Progress").then(t,e)}function u(e){p.predicate=e,p.reverse=!p.reverse}function d(e){var t=e.entityName;t=t.charAt(0).toLowerCase()+t.slice(1),n.path("/"+t+"/"+e.key)}var p=this;p.cancelAllWip=l,p.gotoWip=d,p.predicate="",p.reverse=!1,p.setSort=u,p.title="Work in Progress",p.wip=[],c()}var t="wip";angular.module("app").controller(t,["$scope","$location","bootstrap.dialog","common","config","datacontext",e])}(),function(){"use strict";function e(e,t){function a(e){var t="Confirm Delete";e=e||"item";var n="Delete "+e+"?";return r(t,n)}function r(t,a,r,o){var i={templateUrl:"modalDialog.tpl.html",controller:n,keyboard:!0,resolve:{options:function(){return{title:t,message:a,okText:r,cancelText:o}}}};return e.open(i).result}var o={deleteDialog:a,confirmationDialog:r};return t.put("modalDialog.tpl.html",'<div>    <div class="modal-header">        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" data-ng-click="cancel()">&times;</button>        <h3>{{title}}</h3>    </div>    <div class="modal-body">        <p>{{message}}</p>    </div>    <div class="modal-footer">        <button class="btn btn-primary" data-ng-click="ok()">{{okText}}</button>        <button class="btn btn-info" data-ng-click="cancel()">{{cancelText}}</button>    </div></div>'),o}var t=angular.module("common.bootstrap",["ui.bootstrap"]);t.factory("bootstrap.dialog",["$modal","$templateCache",e]);var n=["$scope","$modalInstance","options",function(e,t,n){e.title=n.title||"Title",e.message=n.message||"",e.okText=n.okText||"OK",e.cancelText=n.cancelText||"Cancel",e.ok=function(){t.close("ok")},e.cancel=function(){t.dismiss("cancel")}}]}();