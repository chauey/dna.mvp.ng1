(function(){"use strict";function t(t,i,r,u,f){function h(){var t=[c()];u.activateController(t,n).then(function(){s("Activated Dashboard View.")})}function c(){return f.typeOfType.getCount().then(function(n){return e.typeOfTypeCount=n})}var o=u.logger.getLogFn,s=o(n),e=this;e.typeOfTypeCount=0;t.$on("$viewContentLoaded",function(){h()})}var n="DashboardController";angular.module("app.features").controller(n,t);t.$inject=["$scope","$http","$timeout","common","datacontext"]})(),function(){"use strict";function t(t,i,r,u){function l(){i.activateController([e(),o(),a(),v()],n).then(function(){h("Activated TypeOfTypes View.");TableAdvanced.init();TableAdvanced.initServer()})}function a(){}function v(){}function e(n){return u.typeOfType.getAll(n,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.typeOfTypeSearch).then(function(t){return f.typeOfTypes=t,f.typeOfTypesServerFilter=t,(!f.typeOfTypeCount||n)&&y(),p(),t})}function o(n){return u.typeOfType.getAllServer(n,f.sortingServer.orderBy,f.sortingServer.orderDesc,f.paging.currentPageServer,f.paging.pageSize,f.typeOfTypeServerSearch).then(function(t){return f.typeOfTypesServerFilter=t,(!f.typeOfTypeFilteredCountServer||n)&&w(),b(),t})}function y(){return u.typeOfType.getCount().then(function(n){return f.typeOfTypeCount=n})}function p(){f.typeOfTypeFilteredCount=u.typeOfType.getFilteredCount(f.typeOfTypeSearch)}function w(){return u.typeOfType.getCount().then(function(n){return f.typeOfTypeCountServer=n})}function b(){u.typeOfType.getFilteredCountServer(f.typeOfTypeServerSearch).then(function(n){f.typeOfTypeFilteredCountServer=n})}function k(){e()}function d(){o()}function g(){e(!0)}function nt(){o(!0)}function tt(n){n.keyCode===c.esc&&(f.typeOfTypeSearch="");e()}function it(){return o()}function rt(n){var r=i.textContains,t=f.typeOfTypesServerSearch;return t?r(n.name,t)||r(n.abbreviation,t):!0}function ut(n){n=i.lowerCaseFirstLetter(n);n=i.replaceSpecialCharacters(n," ");f.sorting.orderBy=n;f.sorting.orderDesc=f.sorting.orderDesc==""?"desc":"";e()}function ft(n){return n=i.lowerCaseFirstLetter(n),n=i.replaceSpecialCharacters(n," "),f.sortingServer.orderBy=n,f.sortingServer.orderDesc=f.sortingServer.orderDesc==""?"desc":"",o()}function et(n){n&&n.typeOfTypeID&&t.path("/typeOfType/"+n.typeOfTypeID)}var s=i.logger.getLogFn,h=s(n),c=r.keyCodes,f=this;f.typeOfTypes=[];f.typeOfTypeCount=0;f.typeOfTypeFilteredCount=0;f.typeOfTypeSearch="";f.title="TypeOfTypes";f.refresh=g;f.search=tt;f.goToTypeOfType=et;f.paging={currentPage:1,currentPageServer:1,maxPagesToShow:5,pageSize:15};f.pageChanged=k;Object.defineProperty(f.paging,"pageCount",{get:function(){return Math.floor(f.typeOfTypeFilteredCount/f.paging.pageSize)+1}});f.setSort=ut;f.theads=["Abbreviation","Name","Key","Order","Value"];f.sorting={orderBy:"name",orderDesc:""};f.typeOfTypesServer=[];f.typeOfTypesServerFilter=[];f.typeOfTypeCountServer=0;f.typeOfTypeFilteredCountServer=0;f.typeOfTypeServerSearch="";f.setTypeOfTypesServerFilter=rt;f.refreshServer=nt;f.searchServer=it;f.pageChangedServer=d;Object.defineProperty(f.paging,"pageCountServer",{get:function(){return Math.floor(f.typeOfTypeFilteredCountServer/f.paging.pageSize)+1}});f.setSortServer=ft;f.sortingServer={orderBy:"name",orderDesc:""};f.selectedParent=null;f.selectedParentServer=null;f.selectedType=null;f.selectedTypeServer=null;l();f.onParentSelectionChange=function(){f.selectedParent!=null?u.typeOfType.getAllByParentID(!1,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.selectedParent.parentID).then(function(n){f.typeOfTypes=n;f.typeOfTypeFilteredCount=n.length}):e(!1)};f.onParentServerSelectionChange=function(){f.selectedParentServer!=null?u.typeOfType.getAllByParentID(!0,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.selectedParentServer.cptCodeVersionID).then(function(n){f.typeOfTypesServerFilter=n;f.typeOfTypeFilteredCountServer=n.length}):o(!0)};f.onTypeSelectionChange=function(){f.selectedType!=null?u.typeOfType.getAllByTypeID(!1,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.selectedType.typeID).then(function(n){f.typeOfTypes=n;f.typeOfTypeFilteredCount=n.length}):e(!1)};f.onTypeServerSelectionChange=function(){f.selectedTypeServer!=null?u.typeOfType.getAllByTypeID(!0,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.selectedTypeServer.cptCodeVersionID).then(function(n){f.typeOfTypesServerFilter=n;f.typeOfTypeFilteredCountServer=n.length}):o(!0)}}var n="typeOfTypeListController";angular.module("app.features").controller(n,t);t.$inject=["$location","common","config","datacontext"]}(),function(){"use strict";function t(t,i,r,u,f,e,o,s,h,c,l){function b(){rt();et();st();e.activateController([tt()],n).then(ct())}function tt(){var n=i.id;return n==="new"?(a.actionType="I",a.typeOfType=c.typeOfType.create()):c.typeOfType.getEntityByIdOrFromWip(n).then(function(n){a.actionType="U";a.originalTypeOfType=w(n);v=n.key;a.typeOfType=n.entity||n},function(){g("Unable to get Type Of Type "+n);y()})}function it(){u.history.back()}function k(){c.cancel();p();l.replaceLocationUrlGuidWithId(a.typeOfType.typeOfTypeID);a.typeOfType.entityAspect.entityState.isDetached()&&y()}function y(){t.path("/typeOfTypeList")}function rt(){r.$on("$destroy",function(){d(!0);c.cancel()})}function ut(){return a.hasChanges&&!a.isSaving}function ft(){return a.isSaving=!0,c.save("SaveTypeOfTypes").then(function(){a.isSaving=!1;e.$broadcast(s.config.userActionAddedEvent,a.actionType,h.controllerNames.typeOfType,a.actionType!="D"?a.originalTypeOfType:w(a.typeOfType),a.actionType!="D"?w(a.typeOfType):null);p();l.replaceLocationUrlGuidWithId(a.typeOfType.typeOfTypeID)},function(){a.isSaving=!1})}function et(){r.$on(o.events.hasChangesChanged,function(n,t){a.hasChanges=t.hasChanges})}function ot(){function n(){function n(){p();y()}function t(){k()}a.actionType="D";c.markDeleted(a.typeOfType);a.save().then(n).catch(t)}return f.deleteDialog("Type Of Type").then(n)}function st(){var n=c.lookup.lookupCachedData;a.parentTypeOfTypes=n.parentTypeOfTypes;a.types=n.types}function ht(){if(a.typeOfType){var n=a.typeOfType.name||"[New TypeOfType] id: "+a.typeOfType.typeOfTypeID;v=c.zStorageWip.storeWipEntity(a.typeOfType,v,nt,n)}}function d(t){e.debouncedThrottle(n,ht,1e3,t)}function ct(){r.$on(o.events.entitiesChanged,function(){d()})}function p(){c.zStorageWip.removeWipEntity(v)}function w(n){return{TypeOfTypeID:n.typeOfTypeID,Abbreviation:n.abbreviation,Name:n.name,Key:n.key,Order:n.order,ParentID:n.parentID,TypeID:n.typeID,Value:n.value,CreatedDate:n.createdDate,UpdatedDate:n.updatedDate,CreateBy:n.createBy,UpdateBy:n.updateBy}}var a=this,g=e.logger.getLogFn(n,"error"),nt=h.entityNames.typeOfType,v=undefined;a.activate=b;a.typeOfType=undefined;a.actionType="";a.originalTypeOfType=null;a.parentTypeOfTypes=[];a.types=[];a.goBack=it;a.cancel=k;a.save=ft;a.deleteTypeOfType=ot;a.hasChanges=!1;a.isSaving=!1;Object.defineProperty(a,"canSave",{get:ut});b()}var n="TypeOfTypeItemController";angular.module("app.features").controller(n,t);t.$inject=["$location","$stateParams","$scope","$window","bootstrap.dialog","common","config","commonConfig","model","datacontext","urlHelper"]}(),function(){"use strict";function t(t,i,r,u){function y(){i.activateController([s(),h()],n).then(function(){e=i.createSearchThrottle(f,"validations");f.validationsSearch&&e(!0);o("Activated Validations View.")})}function s(){function n(n){return f.validations=f.filteredValidations=n.results,o("Retrieved [Validations] from remote data source.",n.results.length,!0),n}return breeze.EntityQuery.from("Validations").using(u.newManager()).execute().then(n).catch(self._queryFailed)}function h(n){function t(n){return f.validationsServer=f.filteredvalidationsserver=n.results,o("Retrieved [Validations] from remote data source.",n.results.length,!0),n}return breeze.EntityQuery.from("Validations").where(n).using(u.newManager()).execute().then(t).catch(self._queryFailed)}function p(n){n&&n.validationID&&t.path("/validation/"+n.validationID)}function w(){s()}function b(){h()}function k(n){n=n.replace(/ /g,"");n=n.replace(/"/g,"");f.sorting.orderBy=n.charAt(0).toLowerCase()+n.slice(1);f.sorting.orderDesc=!f.sorting.orderDesc}function d(n){n.keyCode===a.esc?(f.validationsSearch="",e(!0)):e()}function c(n){var r=i.textContains,t=f.validationsSearch,u=n.date,e=n.beforeDate,o=n.afterDate;return u=i.formatDate(u),e=i.formatDate(e),o=i.formatDate(o),t?r(n.integer,t)||r(n.string,t)||r(u,t)||r(e,t)||r(o,t)||r(n.age,t)||r(n.email,t)||r(n.phone,t)||r(n.uRL,t)||r(n.zip,t)||r(n.startsWithDPT,t)||r(n.containsDPT,t):!0}function g(){o("undone")}var l=i.logger.getLogFn,o=l(n),a=r.keyCodes,f=this,e,v;f.validationsSearch="";f.validations=[];f.filteredValidations=[];e=function(){};f.validationsFilter=c;f.search=d;f.refresh=w;f.title="Validations";f.goToValidation=p;f.theads=["Integer","String","Age","Email","Phone"];f.setSort=k;f.sorting={orderBy:"integer",orderDesc:!1};f.validationsSearchServer="";f.validationsServer=[];f.filteredvalidationsserver=[];v=function(){};f.validationsFilter=c;f.searchServer=g;f.refreshServer=b;f.imageSource="./Content/images/angularjs.png";y()}var n="ValidationListController";angular.module("app.features").controller(n,t);t.$inject=["$location","common","config","entityManagerFactory"]}(),function(){"use strict";function t(t,i,r,u,f,e,o,s,h){function v(){g();it();e.activateController([b(),k()],n)}function b(){var n=i.id;return n==="new"?(c.validation=s.typeOfType.create_Validation(),c.validation):s.typeOfType.getById_Validation(n).then(function(n){c.validation=n},function(){l("Unable to get Validation "+n)})}function k(){var n=i.id;return n==="new"?c.validationNG:s.typeOfType.getById_ValidationNG(n).then(function(n){c.validationNG=n[0];c.validationNG.Date=moment(c.validationNG.Date).format("YYYY-MM-DD");c.validationNG.BeforeDate=moment(c.validationNG.BeforeDate).format("YYYY-MM-DD");c.validationNG.AfterDate=moment(c.validationNG.AfterDate).format("YYYY-MM-DD")},function(){l("Unable to get Validation "+n)})}function d(){u.history.back()}function y(){s.cancel();c.validation.entityAspect.entityState.isDetached()&&p()}function p(){t.path("/validationList")}function g(){r.$on("$destroy",function(){s.cancel()})}function nt(){return h.canSave&&c.hasChanges&&!c.isSaving}function tt(){return c.isSaving=!0,s.save("SaveValidations").then(function(){c.isSaving=!1},function(){c.isSaving=!1})}function it(){r.$on(o.events.hasChangesChanged,function(n,t){c.hasChanges=t.hasChanges})}function rt(){function n(){function n(){p()}function t(){y()}s.markDeleted(c.validation);c.save().then(n).catch(t)}return f.deleteDialog("Validation").then(n)}var c=this,a=e.logger.getLogFn,w=a(n),l=a(n,"error");c.activate=v;c.validation=undefined;c.validationNG=undefined;c.goBack=d;c.cancel=y;c.save=tt;c.deleteValidation=rt;c.hasChanges=!1;c.isSaving=!1;Object.defineProperty(c,"canSave",{get:nt});c.dateFormats=["dd-MMMM-yyyy","dd-MM-yyyy","MM-dd-yyyy","MMMM-dd-yyyy","yyyy-MM-dd","shortDate","mediumDate","longDate","fullDate"];c.datePicker={minDate:"1900-01-01",maxDate:"2100-12-31",format:c.dateFormats[6],dateOptions:{formatYear:"yyyy",startingDay:1}};r.clear=function(){c.validation.date=null};r.disabled=function(){};r.toggleMin=function(){r.minDate=r.minDate?null:new Date}();r.open=function(n){n.preventDefault();n.stopPropagation();r.opened=!0};r.openMinDate=function(n){n.preventDefault();n.stopPropagation();r.openedMinDate=!0};r.openMaxDate=function(n){n.preventDefault();n.stopPropagation();r.openedMaxDate=!0};v();c.integerRegEx=/^(\+|-)?\d+$/;c.creditCardRegEx=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/;c.phoneNumberRegex=/\(\d{3}\) \d{3}-\d{4}/;c.zipRegex=/^\d{5}(?:[-\s]\d{4})?$/;c.startsWithDnaRegex=/DNA|dna/;c.containsDnaRegex=/^(DNA|dna)/;r.submitted=!1;c.submit=function(n){return(r.submitted=!0,n.$valid)?w("Form is valid."):l("Form is not valid.")};c.interacted=function(n){return r.submitted||n.$dirty}}var n="ValidationItemController";angular.module("app.features").controller(n,t);t.$inject=["$location","$stateParams","$scope","$window","bootstrap.dialog","common","config","datacontext","$rootScope"]}(),function(){"use strict";function t(t,i,r,u){function c(){i.activateController([e()],n).then(function(){s("Activated AllDataTypes View.")})}function e(n){return u.allDataType.getAll(n,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.allDataTypeSearch).then(function(t){return f.allDataTypes=t,(!f.allDataTypeCount||n)&&l(),a(),t})}function l(){return u.allDataType.getCount().then(function(n){return f.allDataTypeCount=n})}function a(){f.allDataTypeFilteredCount=u.allDataType.getFilteredCount(f.allDataTypeSearch)}function v(n){n&&(f.paging.currentPage=n,e())}function y(){e(!0)}function p(n){n.keyCode===h.esc&&(f.allDataTypeSearch="");e()}function w(n){n=n.replace(/ /g,"");f.sorting.orderBy=n.charAt(0).toLowerCase()+n.slice(1);f.sorting.orderDesc=f.sorting.orderDesc==""?"desc":"";var t,i=!0;u.allDataType.getCount(i).then(function(n){t=n;f.allDataTypeCount<=t?e().then(function(n){return f.allDataTypes=n}):e(i).then(function(n){return f.allDataTypes=n})})}function b(n){n&&n.allDataTypeID&&t.path("/allDataType/"+n.allDataTypeID)}var o=i.logger.getLogFn,s=o(n),h=r.keyCodes,f=this;f.allDataTypes=[];f.allDataTypeCount=0;f.allDataTypeFilteredCount=0;f.allDataTypeSearch="";f.title="AllDataTypes";f.refresh=y;f.search=p;f.goToAllDataType=b;f.paging={currentPage:1,maxPagesToShow:5,pageSize:15};f.pageChanged=v;Object.defineProperty(f.paging,"pageCount",{get:function(){return Math.floor(f.allDataTypeFilteredCount/f.paging.pageSize)+1}});f.setSort=w;f.theads=["BigInt","Binary","Bit","Char","Date","DateTime","DateTime2","DateTimeOffset","Decimal","Float","Geography","Geometry","Image","Int","Money","NChar","NText","Numeric","NVarChar","NVarCharMax","Real","SmallDateTime","SmallInt","SmallMoney","Text","Time","TimeStamp","TinyInt","UniqueIdentifier","VarBinary","VarBinaryMax","VarChar","VarCharMax","Xml","ZSql_Variant"];f.sorting={orderBy:"bigInt",orderDesc:""};c()}var n="AllDataTypeListController";angular.module("app.features").controller(n,t);t.$inject=["$location","common","config","datacontext"]}(),function(){"use strict";function t(t,i,r,u,f,e,o,s,h,c,l,a,v,y){function g(){et();ht();lt();s.activateController([ut()],n).then(vt())}function ut(){if(p.isModal)return p.actionType="I",p.allDataType=v.allDataType.create();var n=i.id;return n==="new"?(p.actionType="I",p.allDataType=v.allDataType.create()):v.allDataType.getEntityByIdOrFromWip(n).then(function(n){p.actionType="U";p.originalAllDataType=d(n);w=n.key;p.allDataType=n.entity||n;p.selectedZHierarchy=p.allDataType.zHierarchyID},function(){it("Unable to get AllDataType "+n);b()})}function ft(){p.isModal?u.modalInstance.dismiss("cancel"):f.history.back()}function nt(){v.cancel();k();p.isModal?u.modalInstance.dismiss("cancel"):(y.replaceLocationUrlGuidWithId(p.allDataType.allDataTypeID),p.allDataType.entityAspect.entityState.isDetached()&&b())}function b(){t.path("/allDataTypes")}function et(){u.$on("$destroy",function(){tt(!0);v.cancel()})}function ot(){return p.hasChanges&&!p.isSaving}function st(){return p.isSaving=!0,p.allDataType.zHierarchyID=p.selectedZHierarchy,v.save("SaveAllDataTypes").then(function(){p.isSaving=!1;s.$broadcast(c.config.userActionAddedEvent,p.actionType,a.controllerNames.allDataType,p.actionType!="D"?p.originalAllDataType:d(p.allDataType),p.actionType!="D"?d(p.allDataType):null);k();p.isModal?u.modalInstance.close(p.hospital):y.replaceLocationUrlGuidWithId(p.allDataType.allDataTypeID)},function(){p.isSaving=!1})}function ht(){u.$on(h.events.hasChangesChanged,function(n,t){p.hasChanges=t.hasChanges})}function ct(){function n(){function n(){k();p.isModal?u.modalInstance.dismiss("cancel"):b()}function t(){nt()}p.actionType="D";v.markDeleted(p.allDataType);p.save().then(n).catch(t)}return o.deleteDialog("AllDataType").then(n)}function lt(){var n=v.lookup.lookupCachedData;p.zHierarchys=n.zHierarchys;p.allDataType!==undefined&&(p.selectedZHierarchy=p.allDataType.zHierarchyID)}function at(){if(p.allDataType){var n=p.allDataType.name||"[New AllDataType] id: "+p.allDataType.allDataTypeID;w=v.zStorageWip.storeWipEntity(p.allDataType,w,rt,n)}}function tt(t){s.debouncedThrottle(n,at,1e3,t)}function vt(){u.$on(h.events.entitiesChanged,function(){tt()})}function k(){v.zStorageWip.removeWipEntity(w)}function d(n){return{AllDataTypeID:n.allDataTypeID,BigInt:n.bigInt,Binary:n.binary,Bit:n.bit,Char:n.char,Date:n.date,DateTime:n.dateTime,DateTime2:n.dateTime2,DateTimeOffset:n.dateTimeOffset,Decimal:n.decimal,Float:n.float,Geography:n.geography,Geometry:n.geometry,Image:n.image,Int:n.int,Money:n.money,NChar:n.nChar,NText:n.nText,Numeric:n.numeric,NVarChar:n.nVarChar,NVarCharMax:n.nVarCharMax,Real:n.real,SmallDateTime:n.smallDateTime,SmallInt:n.smallInt,SmallMoney:n.smallMoney,Text:n.text,Time:n.time,TimeStamp:n.timeStamp,TinyInt:n.tinyInt,UniqueIdentifier:n.uniqueIdentifier,VarBinary:n.varBinary,VarBinaryMax:n.varBinaryMax,VarChar:n.varChar,VarCharMax:n.varCharMax,Xml:n.xml,ZHierarchyID:n.zHierarchyID,ZSql_Variant:n.zSql_Variant}}function yt(){var n=r.$new();n.isModal=!0;n.modalInstance=e.open({templateUrl:"/app/features/zHierarchy/zHierarchyItem.html",controller:"zHierarchyItemController as vm",size:"lg",scope:n});n.modalInstance.result.then(function(n){n&&(p.zHierarchys.push(n),p.selectedZHierarchy=p.zHierarchys[p.zHierarchys.length-1].zHierarchyID,p.allDataType.zHierarchyID=p.selectedZHierarchy,p.isSaving=!1,p.hasChanges=!0)},function(){})}var p=this,it=s.logger.getLogFn(n,"error"),rt=a.entityNames.allDataType,w=undefined;p.activate=g;p.allDataType=undefined;p.actionType="";p.originalAllDataType=null;p.zHierarchys=[];p.selectedZHierarchy=null;u.$watch("vm.selectedZHierarchy",function(n,t){n!==t&&(p.hasChanges=!0)});p.goBack=ft;p.cancel=nt;p.save=st;p.deleteAllDataType=ct;p.hasChanges=!1;p.isSaving=!1;Object.defineProperty(p,"canSave",{get:ot});p.datePickerConfig=l;p.isModal=!1;u.isModal&&(p.isModal=u.isModal);p.addZHierarchy=yt;g()}var n="AllDataTypeItemController";angular.module("app.features").controller(n,t);t.$inject=["$location","$stateParams","$rootScope","$scope","$window","$modal","bootstrap.dialog","common","config","commonConfig","datePickerConfig","model","datacontext","urlHelper"]}(),function(){"use strict";function t(t,i,r,u){function l(){i.activateController([e(),o()],n).then(function(){h("Activated Users View.")})}function e(n){return u.user.getAll(n,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.userSearch).then(function(t){return f.users=t,(!f.userCount||n)&&a(),v(),t})}function o(n){return u.user.getAllServer(n,f.sortingServer.orderBy,f.sortingServer.orderDesc,f.paging.currentPageServer,f.paging.pageSize,f.userServerSearch).then(function(t){return f.usersServerFilter=t,(!f.userFilteredCountServer||n)&&y(),p(),t})}function a(){return u.user.getCount().then(function(n){return f.userCount=n})}function v(){f.userFilteredCount=u.user.getFilteredCount(f.userSearch)}function y(){return u.user.getCount().then(function(n){return f.userCountServer=n})}function p(){u.user.getFilteredCountServer(f.userServerSearch).then(function(n){f.userFilteredCountServer=n})}function w(){e()}function b(){o()}function k(){e(!0)}function d(){o(!0)}function g(n){n.keyCode===c.esc&&(f.userSearch="");e()}function nt(){return o()}function tt(n){var r=i.textContains,t=f.usersServerSearch;return t?r(n.name,t)||r(n.abbreviation,t):!0}function it(n){n=i.lowerCaseFirstLetter(n);n=i.replaceSpecialCharacters(n," ");f.sorting.orderBy=n;f.sorting.orderDesc=f.sorting.orderDesc==""?"desc":"";e()}function rt(n){return n=i.lowerCaseFirstLetter(n),n=i.replaceSpecialCharacters(n," "),f.sortingServer.orderBy=n,f.sortingServer.orderDesc=f.sortingServer.orderDesc==""?"desc":"",o()}function ut(n){n&&n.id&&t.path("/user/"+n.id)}var s=i.logger.getLogFn,h=s(n),c=r.keyCodes,f=this;f.users=[];f.userCount=0;f.userFilteredCount=0;f.userSearch="";f.title="Users";f.refresh=k;f.search=g;f.goToUser=ut;f.paging={currentPage:1,currentPageServer:1,maxPagesToShow:5,pageSize:15};f.pageChanged=w;Object.defineProperty(f.paging,"pageCount",{get:function(){return Math.floor(f.userFilteredCount/f.paging.pageSize)+1}});f.setSort=it;f.theads=["FirstName","MiddleName","LastName","Email","Birthday"];f.sorting={orderBy:"lastName",orderDesc:""};f.usersServer=[];f.usersServerFilter=[];f.userCountServer=0;f.userFilteredCountServer=0;f.userServerSearch="";f.setUsersServerFilter=tt;f.refreshServer=d;f.searchServer=nt;f.pageChangedServer=b;Object.defineProperty(f.paging,"pageCountServer",{get:function(){return Math.floor(f.userFilteredCountServer/f.paging.pageSize)+1}});f.setSortServer=rt;f.sortingServer={orderBy:"lastName",orderDesc:""};l()}var n="userListController";angular.module("app.features").controller(n,t);t.$inject=["$location","common","config","datacontext"]}(),function(){"use strict";function t(t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){function nt(){ot();ct();at();s.activateController([ft()],n).then(yt())}function ft(){if(w.isModal)return w.actionType="I",w.user=v.user.create();var n=i.id;return n==="new"?(w.actionType="I",w.user=v.user.create()):v.user.getEntityByIdOrFromWip(n,!0).then(function(n){w.actionType="U";w.originalUser=g(n);b=n.key;w.user=n.entity||n;w.selectedUser1_User=w.user.user1_UserID;w.userCustomersListService.populateList(w.user.customers)},function(){rt("Unable to get User "+n);k()})}function et(){w.isModal?u.modalInstance.dismiss("cancel"):f.history.back()}function tt(){v.cancel();d();w.isModal?u.modalInstance.dismiss("cancel"):(y.replaceLocationUrlGuidWithId(w.user.userID),w.user.entityAspect.entityState.isDetached()&&k())}function k(){t.path("/users")}function ot(){u.$on("$destroy",function(){it(!0);v.cancel()})}function st(){return w.hasChanges&&!w.isSaving}function ht(){return w.isSaving=!0,w.user.user1_UserID=w.selectedUser1_User,v.save("SaveUsers").then(function(){w.isSaving=!1;s.$broadcast(c.config.userActionAddedEvent,w.actionType,a.controllerNames.user,w.actionType!="D"?w.originalUser:g(w.user),w.actionType!="D"?g(w.user):null);d();w.isModal?u.modalInstance.close(w.hospital):y.replaceLocationUrlGuidWithId(w.user.userID)},function(){w.isSaving=!1})}function ct(){u.$on(h.events.hasChangesChanged,function(n,t){w.hasChanges=t.hasChanges})}function lt(){function n(){function n(){d();w.isModal?u.modalInstance.dismiss("cancel"):k()}function t(){tt()}w.actionType="D";v.markDeleted(w.user);w.save().then(n).catch(t)}return o.deleteDialog("User").then(n)}function at(){var n=v.lookup.lookupCachedData;w.user1_Users=n.user1_Users;w.user!==undefined&&(w.selectedUser1_User=w.user.user1_UserID)}function vt(){if(w.user){var n=w.user.name||"[New User] id: "+w.user.userID;b=v.zStorageWip.storeWipEntity(w.user,b,ut,n)}}function it(t){s.debouncedThrottle(n,vt,1e3,t)}function yt(){u.$on(h.events.entitiesChanged,function(){it()})}function d(){v.zStorageWip.removeWipEntity(b)}function g(n){return{UserID:n.userID,StatusID:n.statusID,CreatedDate:n.createdDate,UpdatedDate:n.updatedDate,CreateBy:n.createBy,UpdateBy:n.updateBy,FirstName:n.firstName,MiddleName:n.middleName,LastName:n.lastName,Company:n.company,Department:n.department,JobTitle:n.jobTitle,WorkNumber:n.workNumber,WorkFaxNumber:n.workFaxNumber,WorkAddress:n.workAddress,IM:n.iM,Email:n.email,MobileNumber:n.mobileNumber,WebPage:n.webPage,OfficeLocation:n.officeLocation,HomeNumber:n.homeNumber,HomeAddress:n.homeAddress,OtherAddress:n.otherAddress,PagerNumber:n.pagerNumber,CarNumber:n.carNumber,HomeFax:n.homeFax,CompanyNumber:n.companyNumber,Work2Number:n.work2Number,Home2Number:n.home2Number,RadioNumber:n.radioNumber,IM2:n.iM2,IM3:n.iM3,Email2:n.email2,Email3:n.email3,Assistant:n.assistant,AssistantNumber:n.assistantNumber,Manager:n.manager,GovtID:n.govtID,Account:n.account,Birthday:n.birthday,Anniversary:n.anniversary,Spouse:n.spouse,Children:n.children,IUserID:n.iUserID,PhotoUrl:n.photoUrl,PledgeAmount:n.pledgeAmount,NewsLetterEmail:n.newsLetterEmail,OtherInfo:n.otherInfo,User1_UserID:n.user1_UserID}}function pt(){var n=r.$new();n.isModal=!0;n.modalInstance=e.open({templateUrl:"/app/features/user1_User/user1_UserItem.html",controller:"user1_UserItemController as vm",size:"lg",scope:n});n.modalInstance.result.then(function(n){n&&(w.user1_Users.push(n),w.selectedUser1_User=w.user1_Users[w.user1_Users.length-1].user1_UserID,w.user.user1_UserID=w.selectedUser1_User,w.isSaving=!1,w.hasChanges=!0)},function(){})}var w=this;w.userCustomersListService=p;var rt=s.logger.getLogFn(n,"error"),ut=a.entityNames.user,b=undefined;w.activate=nt;w.user=undefined;w.actionType="";w.originalUser=null;w.user1_Users=[];w.selectedUser1_User=null;u.$watch("vm.selectedUser1_User",function(n,t){n!==t&&(w.hasChanges=!0)});w.goBack=et;w.cancel=tt;w.save=ht;w.deleteUser=lt;w.hasChanges=!1;w.isSaving=!1;Object.defineProperty(w,"canSave",{get:st});w.datePickerConfig=l;w.isModal=!1;u.isModal&&(w.isModal=u.isModal);w.addUser1_User=pt;nt()}var n="userItemController";angular.module("app.features").controller(n,t);t.$inject=["$location","$stateParams","$rootScope","$scope","$window","$modal","bootstrap.dialog","common","config","commonConfig","datePickerConfig","model","datacontext","urlHelper","userCustomersListService"]}(),function(){"use strict";function t(t,i){function e(){i.activateController([],n).then(function(){f("Activated Boostrap Demo View.")})}function c(n){return new Array(n)}function l(n){switch(n){default:f("Toast default notification.");break;case"success":o("Toast success notification.");break;case"warn":s("Toast warning notification.");break;case"error":h("Toast error notification.");break;case"clear":toastr.clear()}}function a(n){switch(n){case"error":return t.deleteDialog("item");default:return t.confirmationDialog("Modal heading","Modal body","OK","Cancel")}}var u=i.logger.getLogFn,f=u(n),o=u(n,"success"),s=u(n,"warning"),h=u(n,"error"),r=this;r.title={toastr:"Toastr v.2.0.3",fa:"FontAwesome v4.2.0",bs:"Bootstrap v3.2.0"};r.subtitle={fa:"The iconic font and CSS toolkit",toastr:"Simple Javascript toast notifications",bs:"HTML, CSS, and Javascript code designed to help build user interface components"};r.showToast=l;r.repeat=c;r.showModal=a;r.activate=e;e()}var n="StylingController";angular.module("app.features").controller(n,t);t.$inject=["bootstrap.dialog","common"]}(),function(){"use strict";function t(t,i,r,u,f,e,o){function l(){if(!s.authentication.isAuth)return h("Please login to access admin view."),i.path("/login");e.activateController([],n).then(function(){h("Activated Admin View.")})}function a(n){switch(n.toLowerCase()){case"error":s.errorLogs.length==0&&v();s.errorShow=!s.errorShow;break;case"account":s.accounts.length==0&&y();s.accountShow=!s.accountShow;break;case"role":h("UNDONE");break;case"audit":s.auditLogs.length==0&&p();s.auditShow=!s.auditShow;break;case"token":h("UNDONE")}}function v(){return o.admin.getAll("elmah").then(function(n){return s.errorLogs=n,s.fgError=new wijmo.collections.CollectionView(s.errorLogs),s.fgError.pageSize=20,r.$watch("vm.errorGroup",function(){var r=s.fgError,u,n,t,i;if(r.groupDescriptions.clear(),s.errorGroup)for(u=s.errorGroup.split(","),n=0;n<u.length;n++)t=u[n],t=="timeUtc"?(i=new wijmo.collections.PropertyGroupDescription(t,function(n){return n.timeUtc}),r.groupDescriptions.push(i)):(i=new wijmo.collections.PropertyGroupDescription(t),r.groupDescriptions.push(i))}),n})}function y(){return o.admin.getAll("account").then(function(n){return s.accounts=n,s.fgAccount=new wijmo.collections.CollectionView(s.accounts),s.fgAccount.pageSize=20,r.$watch("vm.accountGroup",function(){var i=s.fgAccount,t,n,r,u;if(i.groupDescriptions.clear(),s.accountGroup)for(t=s.accountGroup.split(","),n=0;n<t.length;n++)r=t[n],u=new wijmo.collections.PropertyGroupDescription(r),i.groupDescriptions.push(u)}),n})}function p(){return o.admin.getAll("audit").then(function(n){return s.auditLogs=n,s.auditLogs.forEach(function(n){switch(n.what.toLowerCase()){case"u":n.what="Update";break;case"i":n.what="Insert";break;case"d":n.what="Delete"}}),s.fgAudit=new wijmo.collections.CollectionView(s.auditLogs),s.fgAudit.pageSize=20,r.$watch("vm.auditGroup",function(){var r=s.fgAudit,u,n,t,i;if(r.groupDescriptions.clear(),s.auditGroup)for(u=s.auditGroup.split(","),n=0;n<u.length;n++)t=u[n],t=="when"?(i=new wijmo.collections.PropertyGroupDescription(t,function(n){return n.when.getFullYear()}),r.groupDescriptions.push(i)):(i=new wijmo.collections.PropertyGroupDescription(t),r.groupDescriptions.push(i))}),n})}var c=e.logger.getLogFn,h=c(n),s=this;s.title="Admin";s.authentication=u.authentication;s.widgetClick=a;s.errorLogs=[];s.fgError;s.errorGroup="";s.errorShow=!1;s.auditLogs=[];s.fgAudit;s.auditGroup="";s.auditShow=!1;s.accounts=[];s.fgAccount;s.accountGroup="";s.accountShow=!1;s.saveAccount=function(){return o.save()};s.removeAccount=function(n){function t(){s.accounts.splice(n,1);s.saveAccount()}return f.deleteDialog("Account").then(t)};s.addAccount=function(){r.inserted={userName:"",email:"",phoneNumber:""};s.accounts.push(r.inserted)};l()}var n="AdminController";angular.module("app.features").controller(n,t);t.$inject=["$filter","$location","$scope","authService","bootstrap.dialog","common","datacontext"]}(),function(){"use strict";function t(t,i,r,u){function y(){f.progress+=c(0,10);f.progress>c(70,90)&&(f.progress=c(5,50),e=(e+1)%f.labels.length,f.status=f.labels[e]);i(y,200)}function c(n,t){return n+Math.floor(Math.random()*(t-n))}function w(){u.activateController([],n).then(function(){a("Activated UI Elements View")})}var l=u.logger.getLogFn,a=l(n),p=l(n,"warn"),f=this,s,o,h,v,e;for(f.chartTypes=[{id:"line",title:"Line"},{id:"spline",title:"Smooth line"},{id:"area",title:"Area"},{id:"areaspline",title:"Smooth area"},{id:"column",title:"Column"},{id:"bar",title:"Bar"},{id:"pie",title:"Pie"},{id:"scatter",title:"Scatter"}],f.chartSeries=[{name:"Smooth Area",data:[1,2,4,7,3],type:"areaspline"},{name:"Line",data:[3,1,null,5,2],connectNulls:!0,type:"line"},{name:"Column 1",data:[5,2,2,3,5],type:"column"},{name:"Column 2",data:[1,1,2,3,2],type:"column"}],f.chartStack=[{id:"",title:"No"},{id:"normal",title:"Normal"},{id:"percent",title:"Percent"}],f.addPoints=function(){var n=f.chartConfig.series,t=Math.floor(Math.random()*n.length);n[t].data=n[t].data.concat([1,10,20])},f.addSeries=function(){for(var n=[],t=0;t<10;t++)n.push(Math.floor(Math.random()*20)+1);f.chartConfig.series.push({data:n})},f.removeSeries=function(n){function t(){if(f.chartConfig.series.length==1)return p("HighCharts: There should be at least 1 series.");var t=f.chartConfig.series;t.splice(n,1)}return r.confirmationDialog("Remove","Do you want remove this series?","Yes","No").then(t)},f.chartConfig={options:{chart:{type:f.chartTypes[0].id},plotOptions:{series:{dataLabels:{enabled:!0,style:{fontSize:"15px"}},stacking:""}}},credits:{enabled:!0},series:f.chartSeries,title:{text:"HighCharts Demo"}},s="US,Germany,UK,Japan,Italy,Greece".split(","),o=[],e=0;e<100;e++)o.push({id:e,country:s[e%s.length],date:new Date(2014,e%12,e%28),amount:Math.random()*1e4,active:e%4==0});f.data=o;f.selectionMode="CellRange";f.isReadOnly=!1;f.cvData=new wijmo.collections.CollectionView(o);f.cvData.pageSize=20;f.groupBy="";t.$watch("vm.groupBy",function(){var i=f.cvData,u,r,n,t;if(i.groupDescriptions.clear(),f.groupBy)for(u=f.groupBy.split(","),r=0;r<u.length;r++)n=u[r],n=="date"?(t=new wijmo.collections.PropertyGroupDescription(n,function(n){return n.date.getFullYear()}),i.groupDescriptions.push(t)):n=="amount"?(t=new wijmo.collections.PropertyGroupDescription(n,function(n){return n.amount>=5e3?"> 5,000":n.amount>=500?"500 to 5,000":"< 500"}),i.groupDescriptions.push(t)):(t=new wijmo.collections.PropertyGroupDescription(n),i.groupDescriptions.push(t))});f.filter="";f.cvData.filter=function(n){return f.filter?n.country.toLowerCase().indexOf(v)>-1:!0};t.$watch("vm.filter",function(){h&&clearTimeout(h);h=setTimeout(function(){v=f.filter.toLowerCase();f.cvData.refresh()},500)});f.getAmountColor=function(n){return n<2500?"black":n<5e3?"green":"blue"};f.useTheme=!1;f.theme="";t.$watch("vm.useTheme",function(){f.theme=f.useTheme?"custom-flex-grid":""});f.treeData=[{name:"♫ Adriane Simione",items:[{name:"♪ Intelligible Sky",items:[{name:"Theories",length:"2:02"},{name:"Giant Eyes",length:"3:29"},{name:"Jovian Moons",length:"1:02"},{name:"Open Minds",length:"2:41"},{name:"Spacetronic Eyes",length:"3:41"}]}]},{name:"♫ Amy Winehouse",items:[{name:"♪ Back to Black",items:[{name:"Addicted",length:"1:34"},{name:"He Can Only Hold Her",length:"2:22"},{name:"Some Unholy War",length:"2:21"},{name:"Wake Up Alone",length:"3:43"},{name:"Tears Dry On Their Own",length:"1:25"}]},{name:"♪ Live in Paradiso",items:[{name:"You Know That I'm No Good",length:"2:32"},{name:"Wake Up Alone",length:"1:04"},{name:"Valerie",length:"1:22"},{name:"Tears Dry On Their Own",length:"3:15"},{name:"Rehab",length:"3:40"}]}]},{name:"♫ Black Sabbath",items:[{name:"♪ Heaven and Hell",items:[{name:"Neon Knights",length:"3:03"},{name:"Children of the Sea",length:"2:54"},{name:"Lady Evil",length:"1:43"},{name:"Heaven and Hell",length:"2:23"},{name:"Wishing Well",length:"3:22"},{name:"Die Young",length:"2:21"}]},{name:"♪ Never Say Die!",items:[{name:"Swinging The Chain",length:"4:32"},{name:"Breakout",length:"3:54"},{name:"Over To You",length:"2:43"},{name:"Air Dance",length:"1:34"},{name:"Johnny Blade",length:"1:02"},{name:"Never Say Die",length:"2:11"}]},{name:"♪ Paranoid",items:[{name:"Rat Salad",length:"3:44"},{name:"Hand Of Doom",length:"4:21"},{name:"Electric Funeral",length:"2:12"},{name:"Iron Man",length:"3:22"},{name:"War Pigs",length:"3:13"}]}]},{name:"♫ Brand X",items:[{name:"♪ Unorthodox Behaviour",items:[{name:"Touch Wood",length:"2:54"},{name:"Running of Three",length:"1:34"},{name:"Unorthodox Behaviour",length:"2:23"},{name:"Smacks of Euphoric Hysteria",length:"3:12"},{name:"Euthanasia Waltz",length:"2:22"},{name:"Nuclear Burn",length:"4:01"}]}]}];f.countryNames=["Albania","Andorra","Armenia","Austria","Azerbaijan","Belarus","Belgium","Bosnia & Herzegovina","Bulgaria","Croatia","Cyprus","Czech Republic","Denmark","Estonia","Finland","France","Georgia","Germany","Greece","Hungary","Iceland","Ireland","Italy","Kosovo","Latvia","Liechtenstein","Lithuania","Luxembourg","Macedonia","Malta","Moldova","Monaco","Montenegro","Netherlands","Norway","Poland","Portugal","Romania","Russia","San Marino","Serbia","Slovakia","Slovenia","Spain","Sweden","Switzerland","Turkey","Ukraine","United Kingdom","Vatican City"];f.phone="555 123 4567";f.cc="1234 1234 1234 1234";f.ssn="003-12-3456";f.post="W1N 1AC";f.menuOrientation="horizontal";f.onSelect=function(n){a($(n.item.firstChild).text())};f.selectedIds=[4,7];f.ntValue=50;f.status="Working...";f.progress=0;f.labels=["Installing start menu items","Registering components","Having a coffee"];e=-1;y();f.orientation="horizontal";w()}var n="UiController";angular.module("app.features").controller(n,t);t.$inject=["$scope","$timeout","bootstrap.dialog","common"]}(),function(){"use strict";function t(t,i,r,u,f,e){function v(){i.activateController([s(!0)],n).then(function(){l("Activated File Uploading View.")})}function s(n){return e.attachment.getAll(n,o.sorting.orderBy,o.sorting.orderDesc,o.paging.currentPage,o.paging.pageSize,o.attachmentSearch).then(function(t){o.attachments=t;(!o.attachmentCount||n)&&y();p()})}function y(){return e.attachment.getCount().then(function(n){return o.attachmentCount=n})}function p(){o.attachmentFilteredCount=e.attachment.getFilteredCount(o.attachmentSearch)}function w(){s()}function h(){s(!0)}function b(n){n.keyCode===a.esc&&(o.attachmentSearch="");s()}function k(n){n=n.replace(/ /g,"");o.sorting.orderBy=n.charAt(0).toLowerCase()+n.slice(1);o.sorting.orderDesc=o.sorting.orderDesc==""?"desc":"";var t,i=!0;e.attachment.getCount(i).then(function(n){t=n;o.attachmentCount<=t?s().then(function(n){return o.attachments=n}):s(i).then(function(n){return o.attachments=n})})}var c=i.logger.getLogFn,l=c(n),a=f.keyCodes,o=this;o.rootFilePath="/UploadFiles";t._Index=0;t.isActive=function(n){return t._Index===n};t.showPrev=function(){t._Index=t._Index>0?--t._Index:o.attachments.length-1};t.showNext=function(){t._Index=t._Index<o.attachments.length-1?++t._Index:0};t.showPhoto=function(n){t._Index=n};o.showGallary=function(n){for(var i=0;i<o.attachments.length;i++)if(o.attachments[i].filePath==n.filePath)return t._Index=i};o.uploader=new r({url:"/api/File/"});o.uploader.filters.push({name:"customFilter",fn:function(){return this.queue.length<10}});o.attachments=[];o.attachmentCount=0;o.attachmentFilteredCount=0;o.attachmentSearch="";o.title="Attachments";o.refresh=h;o.search=b;o.paging={currentPage:1,maxPagesToShow:5,pageSize:7};o.pageChanged=w;Object.defineProperty(o.paging,"pageCount",{get:function(){return Math.floor(o.attachmentFilteredCount/o.paging.pageSize)+1}});o.setSort=k;o.theads=["File Name"];o.sorting={orderBy:"fileName",orderDesc:""};o.uploader.onCompleteItem=function(){h()};v()}var n="FileUploadController";angular.module("app.features").controller(n,t);t.$inject=["$scope","common","FileUploader","$location","config","datacontext"]}(),function(){"use strict";function t(t,i,r,u,f,e){function s(){u.activateController([h()],n);t.$on(f.events.storage.wipChanged,function(n,t){o.wip=t})}function h(){o.wip=e.zStorageWip.getWipSummary()}function c(){function n(){o.isDeleting=!1}function t(){e.zStorageWip.clearAllWip();o.isDeleting=!1}return o.isDeleting=!0,r.deleteDialog("Work in Progress").then(t,n)}function l(n){o.predicate=n;o.reverse=!o.reverse}function a(n){var t=n.entityName;t=t.charAt(0).toLowerCase()+t.slice(1);i.path("/"+t+"/"+n.key)}var o=this;o.cancelAllWip=c;o.gotoWip=a;o.predicate="";o.reverse=!1;o.setSort=l;o.title="Work in Progress";o.wip=[];s()}var n="WipController";angular.module("app.features").controller(n,t);t.$inject=["$scope","$location","bootstrap.dialog","common","config","datacontext"]}(),function(){"use strict";function t(t,i,r,u,f,e,o,s,h){function v(){e.activateController(n).then(function(){a("Activated Login View.")})}function p(){function n(){a("Login successful, redirect to Dashboard.");f.startTimer("",!0)}function t(n){y("Login failed: "+n.error_description)}f.login(c.loginData).then(n).catch(t)}function w(n){var t=h.serviceRoot,i=t+"app/features/membership/authComplete.html",u=t+"api/Account/ExternalLogin?provider="+n+"&response_type=token&client_id="+(n=="Facebook"?s.facebookAuthClientId:n=="Google"?s.googleAuthClientId:"")+"&redirect_uri="+i;window.$windowScope=r;window.open(u,"Authenticate Account","location=0,status=0,width=600,height=750")}var c=this,l=e.logger.getLogFn,y=l(n,"error"),a=l(n);c.activate=v;c.login=undefined;c.actionType="";c.originalLogin=null;c.loginData={userName:"",password:"",useRefreshTokens:!1};c.login=p;c.authExternalProvider=w;c.externalProviders=["Facebook","Google"];v();r.authCompletedCB=function(n){r.$apply(function(){if(n.haslocalaccount=="False")f.logout(),f.externalAuthData={provider:n.provider,userName:n.external_user_name,externalAccessToken:n.external_access_token},t.path("/associate");else{var i={provider:n.provider,externalAccessToken:n.external_access_token};f.obtainAccessToken(i).then(function(){t.path("/")},function(n){r.message=n.error_description})}})}}var n="LoginController";angular.module("app.features").controller(n,t);t.$inject=["$location","$stateParams","$scope","$window","authService","common","commonConfig","config","entityManagerFactory"]}(),function(){"use strict";function t(t,i,r,u,f){function c(){f.activateController(n).then(function(){s("Activated Register View.")})}function a(){function t(){s("Registration successful, redirect to login page in 2 seconds.");u.startTimer("login")}function i(n){var r=[],i,t;for(i in n.data.modelState)for(t=0;t<n.data.modelState[i].length;t++)r.push(n.data.modelState[i][t]);l("Registration failed: "+r.join(" "))}var n=f.strongPasswordChecker(e.registration.password);if(n=="weak"||n=="")return h("Weak password, try to use a long mixed password with: <br/>- lower-case characters<br/>- upper-case characters<br/>- digits<br/>- unique characters.");if(!e.captchaValid)return h("Please enter the correct Math addition.");u.register(e.registration).then(t).catch(i)}var e=this,o=f.logger.getLogFn,l=o(n,"error"),s=o(n),h=o(n,"warning");e.activate=c;e.login=undefined;e.actionType="";e.originalRegistration=null;e.registration={userName:"",email:"",password:"",confirmPassword:""};e.register=a;e.captchaValid=!1;c()}var n="RegisterController";angular.module("app.features").controller(n,t);t.$inject=["$stateParams","$scope","$window","authService","common","config","commonConfig","entityManagerFactory"]}(),function(){"use strict";function t(t,i,r,u,f,e,o,s,h,c){function b(){if(!l.authentication.isAuth)return i.path("/login");s.activateController([k()],n).then(function(){p("Activated Manage Account View.")})}function k(){function n(n){var t=n.data,r,u;if(t==null||t=="null")return e.logout(),i.path("/login");for(r=0;r<t.logins.length;r++)t.logins[r].loginProvider=="Local"&&(l.hasLocalPassword=!0,l.passwordSection="Change Password"),l.externalProviders.forEach(function(n){if(n.indexOf(t.logins[r].loginProvider)>-1){var i=l.externalProviders.indexOf(n);l.externalProviders.splice(i,1)}});for(u=0;u<t.logins.length;u++)l.logins.push(t.logins[u]);l.account=t.account}function t(n){w("Retrieved user information failed: "+n.message+".")}f.getUserInfo().then(n).catch(t)}function nt(){f.updateUserInfo(l.account).then(a).catch(v)}function tt(){var n=s.strongPasswordChecker(l.password.newPassword);if(n=="weak"||n=="")return p("Weak password, try to use a long mixed password with: <br/>- lower-case characters<br/>- upper-case characters<br/>- digits<br/>- unique characters.");l.hasLocalPassword?f.changePassword(l.password).then(a).catch(v):f.setPassword(l.password).then(a).then(d).catch(v)}function it(n){var t=c.serviceRoot,i=t+"app/features/membership/authComplete.html",r=t+"api/Account/ExternalLogin?provider="+n+"&response_type=token&client_id="+(n=="Facebook"?h.facebookAuthClientId:n=="Google"?h.googleAuthClientId:"")+"&redirect_uri="+i;window.$windowScope=u;window.open(r,"Authenticate Account","location=0,status=0,width=600,height=750")}function rt(n){function t(){if(l.logins.length==1)return g("You must have have at least 1 login.");var t={loginProvider:n.loginProvider,providerKey:n.providerKey};f.removeLogin(t).then(a).then(d).catch(v)}return o.confirmationDialog("Remove Login","Do you want to remove Login?","Yes","No").then(t)}function ut(){e.refreshToken().then(function(n){l.tokenRefreshed=!0;l.tokenResponse=n},function(){i.path("/login")})}function a(){p("Update success.")}function d(){l.logins=[];k();r.reload()}function v(n){w("Update failed: "+n.statusText+".")}var l=this,y=s.logger.getLogFn,w=y(n,"error"),g=y(n,"warning"),p=y(n);l.authentication=e.authentication;l.tokenRefreshed=!1;l.tokenResponse=null;l.refreshToken=ut;l.account={userName:"",id:"",email:"",phoneNumber:""};l.upateUserInfo=nt;l.hasLocalPassword=!1;l.passwordSection="Create Local Account";l.password={oldPassword:"",newPassword:"",confirmPassword:""};l.changePassword=tt;l.logins=[];l.externalProviders=["Facebook","Google"];l.addLogin=it;l.removeLogin=rt;l.activate=b;b();u.authCompletedCB=function(n){u.$apply(function(){if(n.haslocalaccount=="False")e.logout(),e.externalAuthData={provider:n.provider,userName:n.external_user_name,externalAccessToken:n.external_access_token},i.path("/associate");else{var t={provider:n.provider,externalAccessToken:n.external_access_token};e.obtainAccessToken(t).then(function(){i.path("/")},function(n){u.message=n.error_description})}})}}var n="ManageController";angular.module("app.features").controller(n,t);t.$inject=["$http","$location","$state","$scope","accountService","authService","bootstrap.dialog","common","config","entityManagerFactory"]}();window.common=function(){function t(n){var u={},f,t,i,e,o,s,h,r;if(n===null)return u;for(f=n.split("&"),r=0;r<f.length;r++)t=f[r],i=t.indexOf("="),i===-1?(e=t,o=null):(e=t.substr(0,i),o=t.substr(i+1)),s=decodeURIComponent(e),h=decodeURIComponent(o),u[s]=h;return u}var n={};return n.getFragment=function(){return window.location.hash.indexOf("#")===0?t(window.location.hash.substr(1)):{}},n}();var fragment=common.getFragment();fragment.state!=undefined&&(window.location.hash=fragment.state||"");window.opener!=null&&(window.opener.$windowScope.authCompletedCB(fragment),window.close()),function(){"use strict";function t(t,i){function e(){i.activateController(n).then(function(){f("Activated Account Association View.")})}function s(){function n(){f("Account has been registered successfully, redicted to Dashboard in 2 seconds.");t.startTimer("")}function i(n){o("Registration failed: "+n.message)}t.registerExternal(r.registerData).then(n).catch(i)}var r=this,u=i.logger.getLogFn,o=u(n,"error"),f=u(n);r.registerExternal=s;r.registerData={userName:t.externalAuthData.userName,provider:t.externalAuthData.provider,externalAccessToken:t.externalAuthData.externalAccessToken};r.activate=e;e()}var n="AssociateController";angular.module("app.features").controller(n,t);t.$inject=["authService","common"]}(),function(){"use strict";function t(t,i,r,u){function l(){ot();i.activateController([e(),o(),a(),v()],n).then(function(){h("Activated AccessControlListItems View.")})}function a(){return u.domainObject.getAllWithoutPaging().then(function(n){f.domainObjects=n})}function v(){return u.aspNetRole.getAllWithoutPaging().then(function(n){f.roles=n})}function e(n){return u.accessControlListItem.getAll(n,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.accessControlListItemSearch).then(function(t){var i,r;for(f.accessControlListItems=t,i=0;i<f.accessControlListItems.length;i++)for(f.accessControlListItems[i].permissions="",r=0;r<f.permissions.length;r++)(f.accessControlListItems[i].permissionValue&f.permissions[r].value)==f.permissions[r].value&&(f.accessControlListItems[i].permissions+=f.permissions[r].description+"|");return(!f.accessControlListItemCount||n)&&y(),p(),t})}function o(n){return u.accessControlListItem.getAllServer(n,f.sortingServer.orderBy,f.sortingServer.orderDesc,f.paging.currentPageServer,f.paging.pageSize,f.accessControlListItemServerSearch).then(function(t){return f.accessControlListItemsServerFilter=t,(!f.accessControlListItemFilteredCountServer||n)&&w(),b(),t})}function y(){return u.accessControlListItem.getCount().then(function(n){return f.accessControlListItemCount=n})}function p(){f.accessControlListItemFilteredCount=u.accessControlListItem.getFilteredCount(f.accessControlListItemSearch)}function w(){return u.accessControlListItem.getCount().then(function(n){return f.accessControlListItemCountServer=n})}function b(){u.accessControlListItem.getFilteredCountServer(f.accessControlListItemServerSearch).then(function(n){f.accessControlListItemFilteredCountServer=n})}function k(){e()}function d(){o()}function g(){e(!0)}function nt(){o(!0)}function tt(n){n.keyCode===c.esc&&(f.accessControlListItemSearch="");e()}function it(){return o()}function rt(n){var r=i.textContains,t=f.accessControlListItemsServerSearch;return t?r(n.name,t)||r(n.abbreviation,t):!0}function ut(n){n=i.lowerCaseFirstLetter(n);n=i.replaceSpecialCharacters(n," ");f.sorting.orderBy=n;f.sorting.orderDesc=f.sorting.orderDesc==""?"desc":"";e()}function ft(n){return n=i.lowerCaseFirstLetter(n),n=i.replaceSpecialCharacters(n," "),f.sortingServer.orderBy=n,f.sortingServer.orderDesc=f.sortingServer.orderDesc==""?"desc":"",o()}function et(n){n&&n.id&&t.path("/accessControlListItem/"+n.id)}function ot(){var n=u.lookup.lookupCachedData;f.permissions=n.permissions}var s=i.logger.getLogFn,h=s(n),c=r.keyCodes,f=this;f.accessControlListItems=[];f.permissions=[];f.accessControlListItemCount=0;f.accessControlListItemFilteredCount=0;f.accessControlListItemSearch="";f.title="AccessControlListItems";f.refresh=g;f.search=tt;f.goToAccessControlListItem=et;f.paging={currentPage:1,currentPageServer:1,maxPagesToShow:5,pageSize:15};f.pageChanged=k;Object.defineProperty(f.paging,"pageCount",{get:function(){return Math.floor(f.accessControlListItemFilteredCount/f.paging.pageSize)+1}});f.setSort=ut;f.theads=["Role","Domain Object","Permission"];f.sorting={orderBy:"permissionValue",orderDesc:""};f.accessControlListItemsServer=[];f.accessControlListItemsServerFilter=[];f.accessControlListItemCountServer=0;f.accessControlListItemFilteredCountServer=0;f.accessControlListItemServerSearch="";f.setAccessControlListItemsServerFilter=rt;f.refreshServer=nt;f.searchServer=it;f.pageChangedServer=d;Object.defineProperty(f.paging,"pageCountServer",{get:function(){return Math.floor(f.accessControlListItemFilteredCountServer/f.paging.pageSize)+1}});f.setSortServer=ft;f.sortingServer={orderBy:"permissionValue",orderDesc:""};f.selectedDomainObject=null;f.selectedDomainObjectServer=null;f.selectedRole=null;f.selectedRoleServer=null;l();f.onDomainObjectSelectionChange=function(){f.selectedDomainObject!=null?u.accessControlListItem.getAllByDomainObjectId(!1,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.selectedDomainObject.id).then(function(n){f.accessControlListItems=n;f.accessControlListItemFilteredCount=n.length}):e(!1)};f.onDomainObjectServerSelectionChange=function(){f.selectedDomainObjectServer!=null?u.accessControlListItem.getAllByDomainObjectId(!0,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.selectedDomainObjectServer.id).then(function(n){f.accessControlListItemsServerFilter=n;f.accessControlListItemFilteredCountServer=n.length}):o(!0)};f.onRoleSelectionChange=function(){f.selectedRole!=null?u.accessControlListItem.getAllByRoleId(!1,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.selectedRole.id).then(function(n){f.accessControlListItems=n;f.accessControlListItemFilteredCount=n.length}):e(!1)};f.onRoleServerSelectionChange=function(){f.selectedRoleServer!=null?u.accessControlListItem.getAllByRoleId(!0,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.selectedRoleServer.id).then(function(n){f.accessControlListItemsServerFilter=n;f.accessControlListItemFilteredCountServer=n.length}):o(!0)}}var n="accessControlListItemListController";angular.module("app.features").controller(n,t);t.$inject=["$location","common","config","datacontext"]}(),function(){"use strict";function t(t,i,r,u,f,e,o,s,h,c,l,a,v,y){function g(){ot();ct();pt();s.activateController([ft()],n).then(bt())}function ft(){if(p.isModal)return p.actionType="I",p.accessControlListItem=v.accessControlListItem.create();var n=i.id;return n==="new"?(p.actionType="I",p.accessControlListItem=v.accessControlListItem.create()):v.accessControlListItem.getEntityByIdOrFromWip(n).then(function(n){p.actionType="U";p.originalAccessControlListItem=d(n);w=n.key;p.accessControlListItem=n.entity||n;tt();p.selectedDomainObject=p.accessControlListItem.domainObjectId;p.selectedRole=p.accessControlListItem.roleId},function(){rt("Unable to get AccessControlListItem "+n);b()})}function et(){p.isModal?u.modalInstance.dismiss("cancel"):f.history.back()}function nt(){v.cancel();k();p.isModal?u.modalInstance.dismiss("cancel"):(y.replaceLocationUrlGuidWithId(p.accessControlListItem.id),p.accessControlListItem.entityAspect.entityState.isDetached()&&b())}function b(){t.path("/accessControlListItems")}function ot(){u.$on("$destroy",function(){it(!0);v.cancel()})}function st(){return p.hasChanges&&!p.isSaving}function ht(){return p.isSaving=!0,p.accessControlListItem.domainObjectId=p.selectedDomainObject,p.accessControlListItem.roleId=p.selectedRole,v.save("SaveAccessControlListItems").then(function(){p.isSaving=!1;s.$broadcast(c.config.userActionAddedEvent,p.actionType,a.controllerNames.accessControlListItem,p.actionType!="D"?p.originalAccessControlListItem:d(p.accessControlListItem),p.actionType!="D"?d(p.accessControlListItem):null);k();p.isModal?u.modalInstance.close(p.hospital):y.replaceLocationUrlGuidWithId(p.accessControlListItem.id)},function(){p.isSaving=!1})}function ct(){u.$on(h.events.hasChangesChanged,function(n,t){p.hasChanges=t.hasChanges})}function lt(){p.selectedDomainObject!=p.accessControlListItem.domainObjectId&&(p.hasChanges=!0)}function at(){p.selectedRole!=p.accessControlListItem.roleId&&(p.hasChanges=!0)}function vt(n){p.accessControlListItem.permissionValue=0;($("#readCheckBox").is(":checked")&&$("#readCheckBox").val()==n||$("#readCheckBox").parent().hasClass("checked")&&$("#readCheckBox").val()!=n)&&(p.accessControlListItem.permissionValue+=p.readPermission.value);($("#writeCheckBox").is(":checked")&&$("#writeCheckBox").val()==n||$("#writeCheckBox").parent().hasClass("checked")&&$("#writeCheckBox").val()!=n)&&(p.accessControlListItem.permissionValue+=p.writePermission.value);($("#deleteCheckBox").is(":checked")&&$("#deleteCheckBox").val()==n||$("#deleteCheckBox").parent().hasClass("checked")&&$("#deleteCheckBox").val()!=n)&&(p.accessControlListItem.permissionValue+=p.deletePermission.value)}function yt(){function n(){function n(){k();p.isModal?u.modalInstance.dismiss("cancel"):b()}function t(){nt()}p.actionType="D";v.markDeleted(p.accessControlListItem);p.save().then(n).catch(t)}return o.deleteDialog("AccessControlListItem").then(n)}function pt(){var t=v.lookup.lookupCachedData,n;for(p.domainObjects=t.domainObjects,p.accessControlListItem!==undefined&&(p.selectedDomainObject=p.accessControlListItem.domainObjectId),p.roles=t.roles,p.accessControlListItem!==undefined&&(p.selectedRole=p.accessControlListItem.roleId),p.permissions=t.permissions,n=0;n<p.permissions.length;n++)p.permissions[n].description=="Read"&&(p.readPermission=p.permissions[n]),p.permissions[n].description=="Write"&&(p.writePermission=p.permissions[n]),p.permissions[n].description=="Delete"&&(p.deletePermission=p.permissions[n]);tt()}function tt(){p.accessControlListItem!==undefined&&((p.accessControlListItem.permissionValue&p.readPermission.value)==p.readPermission.value&&($("#readCheckBox").parent().addClass("checked"),$("#readCheckBox").prop("checked",!0)),(p.accessControlListItem.permissionValue&p.writePermission.value)==p.writePermission.value&&($("#writeCheckBox").parent().addClass("checked"),$("#writeCheckBox").prop("checked",!0)),(p.accessControlListItem.permissionValue&p.deletePermission.value)==p.deletePermission.value&&($("#deleteCheckBox").parent().addClass("checked"),$("#deleteCheckBox").prop("checked",!0)))}function wt(){if(p.accessControlListItem){var n=p.accessControlListItem.name||"[New AccessControlListItem] id: "+p.accessControlListItem.id;w=v.zStorageWip.storeWipEntity(p.accessControlListItem,w,ut,n)}}function it(t){s.debouncedThrottle(n,wt,1e3,t)}function bt(){u.$on(h.events.entitiesChanged,function(){it()})}function k(){v.zStorageWip.removeWipEntity(w)}function d(n){return{Id:n.id,DomainObjectId:n.domainObjectId,RoleId:n.roleId,PermissionValue:n.permissionValue,IsActive:n.isActive,CreatedDate:n.createdDate,CreatedBy:n.createdBy,UpdatedDate:n.updatedDate,UpdatedBy:n.updatedBy}}function kt(){var n=r.$new();n.isModal=!0;n.modalInstance=e.open({templateUrl:"/app/features/domainObject/domainObjectItem.html",controller:"domainObjectItemController as vm",size:"lg",scope:n});n.modalInstance.result.then(function(n){n&&(p.domainObjects.push(n),p.selectedDomainObject=p.domainObjects[p.domainObjects.length-1].domainObjectId,p.accessControlListItem.domainObjectId=p.selectedDomainObject,p.isSaving=!1,p.hasChanges=!0)},function(){})}function dt(){var n=r.$new();n.isModal=!0;n.modalInstance=e.open({templateUrl:"/app/features/role/roleItem.html",controller:"roleItemController as vm",size:"lg",scope:n});n.modalInstance.result.then(function(n){n&&(p.roles.push(n),p.selectedRole=p.roles[p.roles.length-1].roleId,p.accessControlListItem.roleId=p.selectedRole,p.isSaving=!1,p.hasChanges=!0)},function(){})}var p=this,rt=s.logger.getLogFn(n,"error"),ut=a.entityNames.accessControlListItem,w=undefined;p.activate=g;p.accessControlListItem=undefined;p.actionType="";p.originalAccessControlListItem=null;p.domainObjects=[];p.selectedDomainObject=null;p.roles=[];p.selectedRole=null;p.permissions=[];p.readPermission=null;p.writePermission=null;p.deletePermission=null;p.goBack=et;p.cancel=nt;p.save=ht;p.selectedDomainObjectChanged=lt;p.selectedRoleChanged=at;p.permissionChanged=vt;p.deleteAccessControlListItem=yt;p.hasChanges=!1;p.isSaving=!1;Object.defineProperty(p,"canSave",{get:st});p.isModal=!1;u.isModal&&(p.isModal=u.isModal);p.addDomainObject=kt;p.addRole=dt;g()}var n="accessControlListItemItemController";angular.module("app.features").controller(n,t);t.$inject=["$location","$stateParams","$rootScope","$scope","$window","$modal","bootstrap.dialog","common","config","commonConfig","datePickerConfig","model","datacontext","urlHelper"]}(),function(){"use strict";function t(t,i,r,u){function l(){i.activateController([e(),o()],n).then(function(){h("Activated AspNetRoles View.")})}function e(n){return u.aspNetRole.getAll(n,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.aspNetRoleSearch).then(function(t){return f.aspNetRoles=t,(!f.aspNetRoleCount||n)&&a(),v(),t})}function o(n){return u.aspNetRole.getAllServer(n,f.sortingServer.orderBy,f.sortingServer.orderDesc,f.paging.currentPageServer,f.paging.pageSize,f.aspNetRoleServerSearch).then(function(t){return f.aspNetRolesServerFilter=t,(!f.aspNetRoleFilteredCountServer||n)&&y(),p(),t})}function a(){return u.aspNetRole.getCount().then(function(n){return f.aspNetRoleCount=n})}function v(){f.aspNetRoleFilteredCount=u.aspNetRole.getFilteredCount(f.aspNetRoleSearch)}function y(){return u.aspNetRole.getCount().then(function(n){return f.aspNetRoleCountServer=n})}function p(){u.aspNetRole.getFilteredCountServer(f.aspNetRoleServerSearch).then(function(n){f.aspNetRoleFilteredCountServer=n})}function w(){e()}function b(){o()}function k(){e(!0)}function d(){o(!0)}function g(n){n.keyCode===c.esc&&(f.aspNetRoleSearch="");e()}function nt(){return o()}function tt(n){var r=i.textContains,t=f.aspNetRolesServerSearch;return t?r(n.name,t)||r(n.abbreviation,t):!0}function it(n){n=i.lowerCaseFirstLetter(n);n=i.replaceSpecialCharacters(n," ");f.sorting.orderBy=n;f.sorting.orderDesc=f.sorting.orderDesc==""?"desc":"";e()}function rt(n){return n=i.lowerCaseFirstLetter(n),n=i.replaceSpecialCharacters(n," "),f.sortingServer.orderBy=n,f.sortingServer.orderDesc=f.sortingServer.orderDesc==""?"desc":"",o()}function ut(n){n&&n.id&&t.path("/role/"+n.id)}var s=i.logger.getLogFn,h=s(n),c=r.keyCodes,f=this;f.aspNetRoles=[];f.aspNetRoleCount=0;f.aspNetRoleFilteredCount=0;f.aspNetRoleSearch="";f.title="AspNetRoles";f.refresh=k;f.search=g;f.goToAspNetRole=ut;f.paging={currentPage:1,currentPageServer:1,maxPagesToShow:5,pageSize:15};f.pageChanged=w;Object.defineProperty(f.paging,"pageCount",{get:function(){return Math.floor(f.aspNetRoleFilteredCount/f.paging.pageSize)+1}});f.setSort=it;f.theads=["Name"];f.sorting={orderBy:"name",orderDesc:""};f.aspNetRolesServer=[];f.aspNetRolesServerFilter=[];f.aspNetRoleCountServer=0;f.aspNetRoleFilteredCountServer=0;f.aspNetRoleServerSearch="";f.setAspNetRolesServerFilter=tt;f.refreshServer=d;f.searchServer=nt;f.pageChangedServer=b;Object.defineProperty(f.paging,"pageCountServer",{get:function(){return Math.floor(f.aspNetRoleFilteredCountServer/f.paging.pageSize)+1}});f.setSortServer=rt;f.sortingServer={orderBy:"name",orderDesc:""};l()}var n="aspNetRoleListController";angular.module("app.features").controller(n,t);t.$inject=["$location","common","config","datacontext"]}(),function(){"use strict";function t(t,i,r,u,f,e,o,s,h,c,l,a,v,y){function g(){et();ht();s.activateController([ut()],n).then(at())}function ut(){if(p.isModal)return p.actionType="I",p.aspNetRole=v.aspNetRole.create();var n=i.id;return n==="new"?(p.actionType="I",p.aspNetRole=v.aspNetRole.create()):v.aspNetRole.getEntityByIdOrFromWip(n).then(function(n){p.actionType="U";p.originalAspNetRole=d(n);w=n.key;p.aspNetRole=n.entity||n},function(){it("Unable to get AspNetRole "+n);b()})}function ft(){p.isModal?u.modalInstance.dismiss("cancel"):f.history.back()}function nt(){v.cancel();k();p.isModal?u.modalInstance.dismiss("cancel"):(y.replaceLocationUrlGuidWithId(p.aspNetRole.id),p.aspNetRole.entityAspect.entityState.isDetached()&&b())}function b(){t.path("/aspNetRoles")}function et(){u.$on("$destroy",function(){tt(!0);v.cancel()})}function ot(){return p.hasChanges&&!p.isSaving}function st(){return p.isSaving=!0,v.save("SaveAspNetRoles").then(function(){p.isSaving=!1;s.$broadcast(c.config.userActionAddedEvent,p.actionType,a.controllerNames.aspNetRole,p.actionType!="D"?p.originalAspNetRole:d(p.aspNetRole),p.actionType!="D"?d(p.aspNetRole):null);k();p.isModal?u.modalInstance.close(p.hospital):y.replaceLocationUrlGuidWithId(p.aspNetRole.id)},function(){p.isSaving=!1})}function ht(){u.$on(h.events.hasChangesChanged,function(n,t){p.hasChanges=t.hasChanges})}function ct(){function n(){function n(){k();p.isModal?u.modalInstance.dismiss("cancel"):b()}function t(){nt()}p.actionType="D";v.markDeleted(p.aspNetRole);p.save().then(n).catch(t)}return o.deleteDialog("AspNetRole").then(n)}function lt(){if(p.aspNetRole){var n=p.aspNetRole.name||"[New AspNetRole] id: "+p.aspNetRole.id;w=v.zStorageWip.storeWipEntity(p.aspNetRole,w,rt,n)}}function tt(t){s.debouncedThrottle(n,lt,1e3,t)}function at(){u.$on(h.events.entitiesChanged,function(){tt()})}function k(){v.zStorageWip.removeWipEntity(w)}function d(n){return{Id:n.id,Name:n.name}}var p=this,it=s.logger.getLogFn(n,"error"),rt=a.entityNames.aspNetRole,w=undefined;p.activate=g;p.aspNetRole=undefined;p.actionType="";p.originalAspNetRole=null;p.goBack=ft;p.cancel=nt;p.save=st;p.deleteAspNetRole=ct;p.hasChanges=!1;p.isSaving=!1;Object.defineProperty(p,"canSave",{get:ot});p.isModal=!1;u.isModal&&(p.isModal=u.isModal);g()}var n="aspNetRoleItemController";angular.module("app.features").controller(n,t);t.$inject=["$location","$stateParams","$rootScope","$scope","$window","$modal","bootstrap.dialog","common","config","commonConfig","datePickerConfig","model","datacontext","urlHelper"]}(),function(){"use strict";function t(t,i,r,u){function l(){i.activateController([e(),o()],n).then(function(){h("Activated DomainObjects View.")})}function e(n){return u.domainObject.getAll(n,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.domainObjectSearch).then(function(t){return f.domainObjects=t,(!f.domainObjectCount||n)&&a(),v(),t})}function o(n){return u.domainObject.getAllServer(n,f.sortingServer.orderBy,f.sortingServer.orderDesc,f.paging.currentPageServer,f.paging.pageSize,f.domainObjectServerSearch).then(function(t){return f.domainObjectsServerFilter=t,(!f.domainObjectFilteredCountServer||n)&&y(),p(),t})}function a(){return u.domainObject.getCount().then(function(n){return f.domainObjectCount=n})}function v(){f.domainObjectFilteredCount=u.domainObject.getFilteredCount(f.domainObjectSearch)}function y(){return u.domainObject.getCount().then(function(n){return f.domainObjectCountServer=n})}function p(){u.domainObject.getFilteredCountServer(f.domainObjectServerSearch).then(function(n){f.domainObjectFilteredCountServer=n})}function w(){e()}function b(){o()}function k(){e(!0)}function d(){o(!0)}function g(n){n.keyCode===c.esc&&(f.domainObjectSearch="");e()}function nt(){return o()}function tt(n){var r=i.textContains,t=f.domainObjectsServerSearch;return t?r(n.name,t)||r(n.abbreviation,t):!0}function it(n){n=i.lowerCaseFirstLetter(n);n=i.replaceSpecialCharacters(n," ");f.sorting.orderBy=n;f.sorting.orderDesc=f.sorting.orderDesc==""?"desc":"";e()}function rt(n){return n=i.lowerCaseFirstLetter(n),n=i.replaceSpecialCharacters(n," "),f.sortingServer.orderBy=n,f.sortingServer.orderDesc=f.sortingServer.orderDesc==""?"desc":"",o()}function ut(n){n&&n.id&&t.path("/domainObject/"+n.id)}var s=i.logger.getLogFn,h=s(n),c=r.keyCodes,f=this;f.domainObjects=[];f.domainObjectCount=0;f.domainObjectFilteredCount=0;f.domainObjectSearch="";f.title="DomainObjects";f.refresh=k;f.search=g;f.goToDomainObject=ut;f.paging={currentPage:1,currentPageServer:1,maxPagesToShow:5,pageSize:15};f.pageChanged=w;Object.defineProperty(f.paging,"pageCount",{get:function(){return Math.floor(f.domainObjectFilteredCount/f.paging.pageSize)+1}});f.setSort=it;f.theads=["Name","Description"];f.sorting={orderBy:"name",orderDesc:""};f.domainObjectsServer=[];f.domainObjectsServerFilter=[];f.domainObjectCountServer=0;f.domainObjectFilteredCountServer=0;f.domainObjectServerSearch="";f.setDomainObjectsServerFilter=tt;f.refreshServer=d;f.searchServer=nt;f.pageChangedServer=b;Object.defineProperty(f.paging,"pageCountServer",{get:function(){return Math.floor(f.domainObjectFilteredCountServer/f.paging.pageSize)+1}});f.setSortServer=rt;f.sortingServer={orderBy:"name",orderDesc:""};l()}var n="domainObjectListController";angular.module("app.features").controller(n,t);t.$inject=["$location","common","config","datacontext"]}(),function(){"use strict";function t(t,i,r,u,f,e,o,s,h,c,l,a,v,y){function g(){et();ht();s.activateController([ut()],n).then(at())}function ut(){if(p.isModal)return p.actionType="I",p.domainObject=v.domainObject.create();var n=i.id;return n==="new"?(p.actionType="I",p.domainObject=v.domainObject.create()):v.domainObject.getEntityByIdOrFromWip(n).then(function(n){p.actionType="U";p.originalDomainObject=d(n);w=n.key;p.domainObject=n.entity||n},function(){it("Unable to get DomainObject "+n);b()})}function ft(){p.isModal?u.modalInstance.dismiss("cancel"):f.history.back()}function nt(){v.cancel();k();p.isModal?u.modalInstance.dismiss("cancel"):(y.replaceLocationUrlGuidWithId(p.domainObject.id),p.domainObject.entityAspect.entityState.isDetached()&&b())}function b(){t.path("/domainObjects")}function et(){u.$on("$destroy",function(){tt(!0);v.cancel()})}function ot(){return p.hasChanges&&!p.isSaving}function st(){return p.isSaving=!0,v.save("SaveDomainObjects").then(function(){p.isSaving=!1;s.$broadcast(c.config.userActionAddedEvent,p.actionType,a.controllerNames.domainObject,p.actionType!="D"?p.originalDomainObject:d(p.domainObject),p.actionType!="D"?d(p.domainObject):null);k();p.isModal?u.modalInstance.close(p.hospital):y.replaceLocationUrlGuidWithId(p.domainObject.id)},function(){p.isSaving=!1})}function ht(){u.$on(h.events.hasChangesChanged,function(n,t){p.hasChanges=t.hasChanges})}function ct(){function n(){function n(){k();p.isModal?u.modalInstance.dismiss("cancel"):b()}function t(){nt()}p.actionType="D";v.markDeleted(p.domainObject);p.save().then(n).catch(t)}return o.deleteDialog("DomainObject").then(n)}function lt(){if(p.domainObject){var n=p.domainObject.name||"[New DomainObject] id: "+p.domainObject.id;w=v.zStorageWip.storeWipEntity(p.domainObject,w,rt,n)}}function tt(t){s.debouncedThrottle(n,lt,1e3,t)}function at(){u.$on(h.events.entitiesChanged,function(){tt()})}function k(){v.zStorageWip.removeWipEntity(w)}function d(n){return{Id:n.id,Name:n.name,Description:n.description,IsActive:n.isActive,CreatedDate:n.createdDate,CreatedBy:n.createdBy,UpdatedDate:n.updatedDate,UpdatedBy:n.updatedBy}}var p=this,it=s.logger.getLogFn(n,"error"),rt=a.entityNames.domainObject,w=undefined;p.activate=g;p.domainObject=undefined;p.actionType="";p.originalDomainObject=null;p.goBack=ft;p.cancel=nt;p.save=st;p.deleteDomainObject=ct;p.hasChanges=!1;p.isSaving=!1;Object.defineProperty(p,"canSave",{get:ot});p.isModal=!1;u.isModal&&(p.isModal=u.isModal);g()}var n="domainObjectItemController";angular.module("app.features").controller(n,t);t.$inject=["$location","$stateParams","$rootScope","$scope","$window","$modal","bootstrap.dialog","common","config","commonConfig","datePickerConfig","model","datacontext","urlHelper"]}(),function(){"use strict";function t(t,i,r,u){function l(){i.activateController([e(),o()],n).then(function(){h("Activated Permissions View.")})}function e(n){return u.permission.getAll(n,f.sorting.orderBy,f.sorting.orderDesc,f.paging.currentPage,f.paging.pageSize,f.permissionSearch).then(function(t){return f.permissions=t,(!f.permissionCount||n)&&a(),v(),t})}function o(n){return u.permission.getAllServer(n,f.sortingServer.orderBy,f.sortingServer.orderDesc,f.paging.currentPageServer,f.paging.pageSize,f.permissionServerSearch).then(function(t){return f.permissionsServerFilter=t,(!f.permissionFilteredCountServer||n)&&y(),p(),t})}function a(){return u.permission.getCount().then(function(n){return f.permissionCount=n})}function v(){f.permissionFilteredCount=u.permission.getFilteredCount(f.permissionSearch)}function y(){return u.permission.getCount().then(function(n){return f.permissionCountServer=n})}function p(){u.permission.getFilteredCountServer(f.permissionServerSearch).then(function(n){f.permissionFilteredCountServer=n})}function w(){e()}function b(){o()}function k(){e(!0)}function d(){o(!0)}function g(n){n.keyCode===c.esc&&(f.permissionSearch="");e()}function nt(){return o()}function tt(n){var r=i.textContains,t=f.permissionsServerSearch;return t?r(n.name,t)||r(n.abbreviation,t):!0}function it(n){n=i.lowerCaseFirstLetter(n);n=i.replaceSpecialCharacters(n," ");f.sorting.orderBy=n;f.sorting.orderDesc=f.sorting.orderDesc==""?"desc":"";e()}function rt(n){return n=i.lowerCaseFirstLetter(n),n=i.replaceSpecialCharacters(n," "),f.sortingServer.orderBy=n,f.sortingServer.orderDesc=f.sortingServer.orderDesc==""?"desc":"",o()}function ut(n){n&&n.id&&t.path("/permission/"+n.id)}var s=i.logger.getLogFn,h=s(n),c=r.keyCodes,f=this;f.permissions=[];f.permissionCount=0;f.permissionFilteredCount=0;f.permissionSearch="";f.title="Permissions";f.refresh=k;f.search=g;f.goToPermission=ut;f.paging={currentPage:1,currentPageServer:1,maxPagesToShow:5,pageSize:15};f.pageChanged=w;Object.defineProperty(f.paging,"pageCount",{get:function(){return Math.floor(f.permissionFilteredCount/f.paging.pageSize)+1}});f.setSort=it;f.theads=["Value","Name","Description"];f.sorting={orderBy:"name",orderDesc:""};f.permissionsServer=[];f.permissionsServerFilter=[];f.permissionCountServer=0;f.permissionFilteredCountServer=0;f.permissionServerSearch="";f.setPermissionsServerFilter=tt;f.refreshServer=d;f.searchServer=nt;f.pageChangedServer=b;Object.defineProperty(f.paging,"pageCountServer",{get:function(){return Math.floor(f.permissionFilteredCountServer/f.paging.pageSize)+1}});f.setSortServer=rt;f.sortingServer={orderBy:"name",orderDesc:""};l()}var n="permissionListController";angular.module("app.features").controller(n,t);t.$inject=["$location","common","config","datacontext"]}(),function(){"use strict";function t(t,i,r,u,f,e,o,s,h,c,l,a,v,y){function g(){et();ht();s.activateController([ut()],n).then(at())}function ut(){if(p.isModal)return p.actionType="I",p.permission=v.permission.create();var n=i.id;return n==="new"?(p.actionType="I",p.permission=v.permission.create()):v.permission.getEntityByIdOrFromWip(n).then(function(n){p.actionType="U";p.originalPermission=d(n);w=n.key;p.permission=n.entity||n},function(){it("Unable to get Permission "+n);b()})}function ft(){p.isModal?u.modalInstance.dismiss("cancel"):f.history.back()}function nt(){v.cancel();k();p.isModal?u.modalInstance.dismiss("cancel"):(y.replaceLocationUrlGuidWithId(p.permission.id),p.permission.entityAspect.entityState.isDetached()&&b())}function b(){t.path("/permissions")}function et(){u.$on("$destroy",function(){tt(!0);v.cancel()})}function ot(){return p.hasChanges&&!p.isSaving}function st(){return p.isSaving=!0,v.save("SavePermissions").then(function(){p.isSaving=!1;s.$broadcast(c.config.userActionAddedEvent,p.actionType,a.controllerNames.permission,p.actionType!="D"?p.originalPermission:d(p.permission),p.actionType!="D"?d(p.permission):null);k();p.isModal?u.modalInstance.close(p.hospital):y.replaceLocationUrlGuidWithId(p.permission.id)},function(){p.isSaving=!1})}function ht(){u.$on(h.events.hasChangesChanged,function(n,t){p.hasChanges=t.hasChanges})}function ct(){function n(){function n(){k();p.isModal?u.modalInstance.dismiss("cancel"):b()}function t(){nt()}p.actionType="D";v.markDeleted(p.permission);p.save().then(n).catch(t)}return o.deleteDialog("Permission").then(n)}function lt(){if(p.permission){var n=p.permission.name||"[New Permission] id: "+p.permission.id;w=v.zStorageWip.storeWipEntity(p.permission,w,rt,n)}}function tt(t){s.debouncedThrottle(n,lt,1e3,t)}function at(){u.$on(h.events.entitiesChanged,function(){tt()})}function k(){v.zStorageWip.removeWipEntity(w)}function d(n){return{Id:n.id,Value:n.value,Name:n.name,Description:n.description,IsActive:n.isActive,CreatedDate:n.createdDate,CreatedBy:n.createdBy,UpdatedDate:n.updatedDate,UpdatedBy:n.updatedBy}}var p=this,it=s.logger.getLogFn(n,"error"),rt=a.entityNames.permission,w=undefined;p.activate=g;p.permission=undefined;p.actionType="";p.originalPermission=null;p.goBack=ft;p.cancel=nt;p.save=st;p.deletePermission=ct;p.hasChanges=!1;p.isSaving=!1;Object.defineProperty(p,"canSave",{get:ot});p.isModal=!1;u.isModal&&(p.isModal=u.isModal);g()}var n="permissionItemController";angular.module("app.features").controller(n,t);t.$inject=["$location","$stateParams","$rootScope","$scope","$window","$modal","bootstrap.dialog","common","config","commonConfig","datePickerConfig","model","datacontext","urlHelper"]}(),function(){"use strict";function t(t,i){function u(){i.activateController(n).then(function(){e("Activated Payment View.")})}var f=this,r=i.logger.getLogFn,o=r(n,"error"),e=r(n);f.activate=u;u();t.onSubmit=function(){};t.stripeCallback=function(n,t){t.error||window.alert("success! token: "+t.id)}}var n="PaymentController";angular.module("app.features").controller(n,t);t.$inject=["$scope","common","commonConfig","config"]}(),function(){"use strict";function t(t,i,r,u,f,e,o){function l(){s.authentication.isAuth||i.path("/login");r.activateController([v(),y()],n).then(function(){c("Activated Subscription View.")})}function v(){return o.getStripePlans().then(function(n){s.plans=n.data.plans})}function y(){return o.getStripeCustomerInfos().then(function(n){var t=n.data;if(t==null||t=="null")return e.logout(),i.path("/login");s.stripeCustomerInfos=t})}function p(n){return n==s.stripeCustomerInfos.currentSubscriptionPlanID}function w(n){if(!s.stripeCustomerInfos.hasCreditCard)return i.path("/addCard/"+n);var t={newPlanID:n};o.updateSubscription(t).then(function(n){var t=n.data;if(t==null||t=="null")return e.logout(),i.path("/login");s.stripeCustomerInfos=t}).catch(function(n){c(n)})}var s=this,h=r.logger.getLogFn,a=h(n,"error"),c=h(n);s.account={userName:"",id:"",email:"",phoneNumber:""};s.authentication=e.authentication;s.plans=[];s.logins=[];s.stripeCustomerInfos={currentSubscriptionPlanId:"",hasCreditCard:!1,hasStripeRegistered:!1};s.subscribe=w;s.checkCurrentSubscription=p;s.externalProviders=["Facebook","Google"];s.activate=l;l()}var n="SubscriptionController";angular.module("app.features").controller(n,t);t.$inject=["$scope","$location","common","commonConfig","config","authService","accountService"]}(),function(){"use strict";function t(t,i,r,u,f){function h(){if(!e.authentication.isAuth)return t.path("/login");i.activateController([c()],n).then(function(){s("Activated Cards View.")})}function c(){return f.getUserCards().then(function(n){e.cards=n.data})}function l(n){n&&n.id&&t.path("/addCard/"+n.id)}var o=i.logger.getLogFn,s=o(n),a=r.keyCodes,e=this;e.authentication=u.authentication;e.cards=[];e.title="cards";e.goTocard=l;e.theads=["Last4"];h()}var n="ManagePaymentController";angular.module("app.features").controller(n,t);t.$inject=["$location","common","config","authService","accountService"]}(),function(){"use strict";function t(t,i,r,u,f,e,o){function h(){e.activateController([],n).then()}function l(){f.history.back()}function a(){}function v(){}t.addNewCard=r.id==="new";t.setAsDefault=!1;t.stripeCallback=function(n,u){var f,e;u.error?c("Stripe returns an error when trying to validate your card. code: "+n+" - "+u.error.message):(f={setAsDefaultCard:t.setAsDefault,token:u.id},t.addNewCard?o.addUserCard(f).then(function(){i.path("/payment")}):(e={token:u.id,newPlanID:r.id},o.updateSubscription(e).then(function(){i.path("/subscription")})))};var s=this,c=e.logger.getLogFn(n,"error");s.activate=h;s.actionType="";s.originalcard=null;s.goBack=l;s.delete=v;s.stripeCallback=a;h()}var n="AddCardController";angular.module("app.features").controller(n,t);t.$inject=["$scope","$location","$stateParams","$rootScope","$window","common","accountService"]}();